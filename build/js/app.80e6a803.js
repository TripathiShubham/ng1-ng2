angular.module("CitrixApp",["ui.router","LocalStorageModule","ui.calendar","ngFileUpload","googlechart","ui.bootstrap","ngAnimate","ngSanitize","ng.deviceDetector","ngFileUpload","ui.select","colorpicker.module","wysiwyg.module","angular-growl","ngCookies"]).constant("USER_ROLES",{admin:"admin",partner:"partner",disti:"disti"}).constant("logoutUrl",{url:"https://identityqa.citrix.com/Utility/STS?wa=wsignout1.0&wreply=https://sdp-dev.citrix.com/#/acssecure"}).constant("IdentityURL",{url:"https://sdp-dev.citrix.com:5000"}).constant("IMAGE_URL",{url:"/assets/uploads/images/"}).constant("LOGIN_VIA",{value:"STS"}).constant("APP_URL",{value:""}),angular.module("CitrixApp").config(["$stateProvider","$urlRouterProvider","$provide","localStorageServiceProvider","growlProvider","$httpProvider",function(e,t,r,a,o,n){o.globalTimeToLive(3e3),r.decorator("$state",["$delegate","$rootScope",function(e,t){return t.$on("$stateChangeStart",function(t,r,a){e.params=a}),e}]),n.interceptors.push(["$q","localStorageService","growl","$location",function(e,t,r,a){return{request:function(r){return(-1==r.url.indexOf("logout")&&null!=t.get("token")||void 0!=t.get("token"))&&(r.headers["X-Auth-Token"]=t.get("token"),r.headers["Cache-Control"]="no-cache, max-age=0, must-revalidate, no-store"),r||e.when(r)},requestError:function(t){return e.reject(t)},response:function(t){return t||e.when(t)},responseError:function(o){return o.data,401==o.status&&(r.addInfoMessage("Please relogin, your session is invalidated.",{}),t.clearAll(),a.path("/acssecure")),e.reject(o)}}}]),e.state("login",{url:"/login",templateUrl:"app/components/login/login.view.html",authenticate:!1,data:{headerName:"Citrix",pageName:"Login"}}).state("devLogin",{url:"/devlogin",templateUrl:"app/components/login/login.view.html",authenticate:!1,data:{headerName:"Citrix",pageName:"DEV - Login"}}).state("account",{url:"/account",templateUrl:"app/components/login/account.html",controller:"AccountController",authenticate:!1,data:{headerName:"Citrix",pageName:"Account"}}).state("acssecure",{url:"/acssecure",templateUrl:"app/components/login/acsSecure.view.html",controller:"AcsSecureController",controllerAs:"AcsController",authenticate:!1,data:{headerName:"Citrix",pageName:"AcsSecure"}}).state("ssologin",{url:"/SSO/:token",controller:"AcsController",authenticate:!1}).state("error",{url:"/error/:errorCode",templateUrl:"app/components/login/error.html",controller:"ErrorController",controllerAs:"ERController",authenticate:!1}).state("admin",{url:"/admin",templateUrl:"app/components/adminDashboard/adminDashboard.view.html",authenticate:!0,data:{headerName:"ADMIN",pageName:""}}).state("admin.category",{url:"/category",templateUrl:"app/components/adminDashboard/allCategories/allCategories.view.html",authenticate:!0,data:{headerName:"ADMIN",pageName:"All Categories"}}).state("admin.offers",{url:"/category/offers",templateUrl:"app/components/adminDashboard/allOffers/allOffers.view.html",authenticate:!0,data:{headerName:"ADMIN",pageName:"Offerings"}}).state("admin.createCategory",{url:"/createCategory",templateUrl:"app/components/adminDashboard/createCategory/createCategory.view.html",authenticate:!0,data:{headerName:"ADMIN",pageName:"Create Categories"}}).state("admin.singlePartner",{url:"/partnerStatus/:personId",templateUrl:"app/components/adminDashboard/partnerStatus/partnerStatus.view.html",authenticate:!0,data:{headerName:"ADMIN",pageName:"Partner Status"}}).state("admin.allPartnerStatus",{url:"/allPartnerStatus/:projectName",templateUrl:"app/components/adminDashboard/allPartnersStatus/allPartnersStatus.view.html",authenticate:!0,data:{headerName:"ADMIN",pageName:"All Partners Status"}}).state("admin.editCategory",{url:"/editCategory/:categoryId",templateUrl:"app/components/adminDashboard/editCategory/editCategory.view.html",authenticate:!0,data:{headerName:"ADMIN",pageName:"Edit Category"}}).state("admin.offerDetails",{url:"/offerDetails/:offerID",templateUrl:"app/components/adminDashboard/offerDetails/offerDetails.view.html",authenticate:!0}).state("admin.createOffer",{url:"/createOffer/:categoryId",templateUrl:"app/components/adminDashboard/createOffer/createOffer.view.html",authenticate:!0,data:{headerName:"ADMIN",pageName:"Create Offer"}}).state("admin.previewOffer",{url:"/categories/previewOffers",templateUrl:"app/components/partnerDashboard/OfferByCategory/offerByCategory.view.html",authenticate:!0,data:{headerName:"Admin",pageName:"Preview Offerings"}}).state("admin.manageUser",{url:"/manageUser",templateUrl:"app/components/adminDashboard/manageUser/manageUser.view.html",authenticate:!0,data:{headerName:"ADMIN",pageName:"Manage User"}}).state("admin.editOffer",{url:"/admin/editOffer/:offerId/:categoryId",templateUrl:"app/components/adminDashboard/editOffer/editOffer.view.html",authenticate:!0,data:{headerName:"ADMIN",pageName:"Edit Offer"}}).state("admin.emailTemplate",{url:"/emailTemplate",templateUrl:"app/components/adminDashboard/emailTemplate/emailTemplate.view.html",authenticate:!0,data:{headerName:"ADMIN",pageName:"Email Template"}}).state("admin.distributor",{url:"/distributor",templateUrl:"app/components/adminDashboard/allDistributors/allDistributors.view.html",authenticate:!0,data:{headerName:"ADMIN",pageName:"Distributors"}}).state("admin.addDistributor",{url:"/adddistributor",templateUrl:"app/components/adminDashboard/addDistributor/addDistributor.view.html",authenticate:!0,data:{headerName:"ADMIN",pageName:"Add Distributor"}}).state("admin.editDistributor",{url:"/editdistributor",templateUrl:"app/components/adminDashboard/editDistributor/editDistributor.view.html",authenticate:!0,data:{headerName:"ADMIN",pageName:"Update Distributor"}}).state("admin.allPartnerSurvey",{url:"/partnerSurvey",templateUrl:"app/components/adminDashboard/partnersSurvey/partnersSurvey.view.html",authenticate:!0,data:{headerName:"ADMIN",pageName:"Partner Survey"}}).state("admin.manageAdmin",{url:"/manageAdmin",templateUrl:"app/components/adminDashboard/manageAdmin/manageAdmin.view.html",authenticate:!0,data:{headerName:"ADMIN",pageName:"Manage Admin"}}).state("partner",{url:"/partner",templateUrl:"app/components/partnerDashboard/partnerDashboard.view.html",authenticate:!0,data:{headerName:"PARTNER",pageName:""}}).state("partner.category",{url:"/categories",templateUrl:"app/components/partnerDashboard/AllCategories/allCategories.view.html",authenticate:!0,data:{headerName:"PARTNER",pageName:"Welcome To The Services Delivery Portal"}}).state("partner.categoriesWithOffers",{url:"/categoriesWithOffers",templateUrl:"app/components/partnerDashboard/allCategoriesWithOffers/allCategoriesWithOffers.view.html",authenticate:!0,data:{headerName:"PARTNER",pageName:"All Offerings With Categories"}}).state("partner.offers",{url:"/categories/offers",templateUrl:"app/components/partnerDashboard/OfferByCategory/offerByCategory.view.html",authenticate:!0,data:{headerName:"PARTNER",pageName:"Offerings"}}).state("partner.offersDetails",{url:"/offersDetails/:offerID/:allOffersPage",templateUrl:"app/components/partnerDashboard/OfferDetails/offerDetails.view.html",authenticate:!0,data:{headerName:"PARTNER",pageName:"Services Delivery Kit"}}).state("partner.checkout",{url:"/checkout",templateUrl:"app/components/partnerDashboard/checkOut/checkOut.view.html",authenticate:!0,data:{headerName:"PARTNER",pageName:"Services Delivery Kit"}}).state("partner.orderSummary",{url:"/orderSummary",templateUrl:"app/components/partnerDashboard/orderSummary/orderSummary.view.html",authenticate:!0,data:{headerName:"PARTNER",pageName:"Services Delivery Kit"}}).state("partner.orderInfo",{url:"/order",templateUrl:"app/components/partnerDashboard/orderInfo/orderInfo.view.html",authenticate:!0,data:{headerName:"PARTNER",pageName:"Order Confirmation"}}).state("partner.customerSurvey",{url:"/survey",templateUrl:"app/components/partnerDashboard/customerSurvey/customerSurvey.view.html",authenticate:!0,data:{headerName:"PARTNER",pageName:"Customer Survey"}}).state("partner.myProjectList",{url:"/myProjectList/:catName",templateUrl:"app/components/partnerDashboard/myProjectList/myProjectList.view.html",authenticate:!0,data:{headerName:"PARTNER",pageName:"My Projects"}}).state("partner.selectedProject",{controller:"MyProjectController",controllerAs:"MPController",resolve:{getProjectData:["MyProjectService","$state",function(e,t){return e.getProjectDetails(t.params.project)}]},url:"/myProject/:project",templateUrl:"app/components/partnerDashboard/myProject/myProject.view.html",authenticate:!0,data:{headerName:"PARTNER",pageName:"Project Details"}}).state("partner.contactUs",{url:"/thankYou",templateUrl:"app/components/partnerDashboard/contactUs/contactUs.view.html",authenticate:!0,data:{headerName:"PARTNER",pageName:"Thank You"}}),t.otherwise("/acssecure")}]).run(["$rootScope","$state","LoginService","localStorageService",function(e,t,r,a){e.$on("$stateChangeStart",function(e,o,n,s,i){var l=r.isLogin(),c=a.get("devLogin");1==o.authenticate&&null==l?(e.preventDefault(),t.go("acssecure")):-1!=o.name.indexOf("devLogin")&&"false"==c?(e.preventDefault(),t.go("acssecure")):-1!=o.name.indexOf("admin")&&-1!=s.name.indexOf("partner")?e.preventDefault():-1!=o.name.indexOf("partner")&&-1!=s.name.indexOf("admin")&&e.preventDefault()})}]),angular.module("CitrixApp").controller("ErrorController",["MainService","growl","$timeout","$stateParams",function(e,t,r,a){this.errorCode=a.errorCode,0==this.errorCode?t.addInfoMessage("Service Unavailable"):1==this.errorCode?t.addInfoMessage("Email already exist"):2==this.errorCode?t.addInfoMessage("Role Null"):3==this.errorCode?t.addInfoMessage("Duplicate Customer ID"):4==this.errorCode?t.addInfoMessage("Unautorized User"):5==this.errorCode?t.addInfoMessage("Some internal server error occured"):6==this.errorCode&&t.addInfoMessage("User is InActive"),r(function(){e.logout()},3e3)}]),angular.module("CitrixApp").factory("LoginService",["localStorageService","$q","$http","APP_URL",function(e,t,r,a){var o={};return o.isLogin=function(){return e.get("login")},o.login=function(e){var o=t.defer();return r.post(a.value+"/users/login",e).then(function(e){o.resolve(e.data)},function(e){console.log("some error occur"),o.reject(e)}),o.promise},o.ssologin=function(e){var o=t.defer();return r.get(a.value+"/users/getUserByToken").then(function(e){o.resolve(e.data)},function(e){console.log("some error occur"),o.reject(e)}),o.promise},o}]),angular.module("CitrixApp").controller("AccountController",["$state","localStorageService","$location","LoginService","USER_ROLES",function(e,t,r,a,o){"localhost"==document.location.hostname?e.go("login"):(console.log("Inside AccountController onLoad"),document.location.hash.length>0&&(document.cookie="anchor_backup="+escape(document.location.hash.substring(1))),document.forms[0].submit())}]),angular.module("CitrixApp").factory("AcsSecureService",["$http","$q","APP_URL",function(e,t,r){var a={};return a.getToken=function(){var a=t.defer();return e.get(r.value+"/athena/getathenacredentials").then(function(e){a.resolve(e.data)},function(e){console.log("Some error occur"),console.log(e),a.reject("Error")}),a.promise},a}]),angular.module("CitrixApp").service("MainService",["$state","$rootScope","localStorageService","$timeout","$window","$http","$cookies","LOGIN_VIA","logoutUrl","APP_URL",function(e,t,r,a,o,n,s,i,l,c){var d={};return d.logout=function(){if(t.showSpinner=!0,"localhost"==document.location.hostname)t.showSpinner=!1,r.clearAll(),e.go("login");else{var a=r.get("token");r.clearAll(),s.remove("athena_state"),n({method:"GET",url:c.value+"/users/logout",headers:{"X-Auth-Token":a}}).then(function(e){"STS"==i.value?o.location.href=l.url:"OPENID"==i.value&&(o.location.href=e.data.message)},function(e){}),window.onunload=function(e){}}},d}]),angular.module("CitrixApp").service("AdminService",[function(){}]),angular.module("CitrixApp").factory("AllOffersService",["$http","$q","APP_URL",function(e,t,r){var a={};return a.getAllOffers=function(a){var o=t.defer();return e.get(r.value+"/categories/"+a).then(function(e){e.data.hasOwnProperty("message")&&o.resolve([]),o.resolve(e.data)},function(e){console.log("Some error occur"),console.log(e),o.reject("Error")}),o.promise},a.removeOffers=function(a){var o=t.defer();return e.delete(r.value+"/offers/delete/"+a,null,{transformResponse:[function(e){return e}]}).then(function(e){o.resolve(e)},function(e){console.log("Some error occur"),console.log(e),o.reject("Error")}),o.promise},a}]),angular.module("CitrixApp").factory("CreateOfferService",["$http","$q","APP_URL",function(e,t,r){var a={};return a.createOffer=function(a){var o=t.defer();return e.post(r.value+"/offers/createOffer",a,{transformResponse:[function(e){return e}]}).then(function(e){o.resolve(e)},function(e){console.log("Some error occur"),console.log(e),o.reject("Error")}),o.promise},a}]),angular.module("CitrixApp").factory("EditOfferService",["$http","$q","APP_URL",function(e,t,r){var a={};return a.updateOffer=function(a){var o=t.defer();return e.put(r.value+"/offers/updateOffer",a,{transformResponse:[function(e){return e}]}).then(function(e){o.resolve(e)},function(e){console.log("some error occure"),console.log(e),o.reject(e)}),o.promise},a}]),angular.module("CitrixApp").factory("EditCategoryService",["$http","$q","APP_URL",function(e,t,r){var a={};return a.getCategoryDetails=function(a){var o=t.defer();return e.get(r.value+"/categories/get/"+a).then(function(e){o.resolve(e.data)},function(e){console.log("Some error occur here"),console.log(e),o.reject("Error")}),o.promise},a.updateCategory=function(a){var o=t.defer();return e.put(r.value+"/categories/updateCategory",a,{transformResponse:[function(e){return e}]}).then(function(e){o.resolve(e)},function(e){console.log("Some Error Occured while Updating Category"),console.log(e),o.reject("Error")}),o.promise},a}]),angular.module("CitrixApp").factory("AdminOfferDetailsService",["$http","$q",function(e,t){return{}}]),angular.module("CitrixApp").factory("AdminAllCategoryService",["$http","$q","APP_URL",function(e,t,r){var a={};return a.removeCategories=function(a){var o=t.defer();return e.delete(r.value+"/categories/delete/"+a,{transformResponse:[function(e){return e}]}).then(function(e){o.resolve(e)},function(e){console.log("some error occur"),console.log(e),o.reject(e)}),o.promise},a}]),angular.module("CitrixApp").factory("CreateCategoryService",["$http","$q","APP_URL",function(e,t,r){var a={};return a.createCategory=function(a){var o=t.defer();return e.post(r.value+"/categories/createCategory",a,{transformResponse:[function(e){return e}]}).then(function(e){o.resolve(e)},function(e){o.reject("Error")}),o.promise},a}]),angular.module("CitrixApp").factory("AllPartnersStatusService",["$http","$q","APP_URL",function(e,t,r){var a={};return a.getAllPartnerStatus=function(a,o,n){var s=t.defer();return e.get(r.value+"/projects/allpartnerstatus?projectName="+n.project_name+"&openStatus="+n.open+"&completeStatus="+n.complete+"&inprogressStatus="+n.InProgress+"&startDate="+n.start_date+"&endDate="+n.end_date+"&registerDate="+n.purchase_date+"&pagenumber="+a+"&pageoffset="+o).then(function(e){e.data.hasOwnProperty("message")&&s.resolve([]),s.resolve(e.data)},function(e){console.log("Some error occur"),console.log(e),s.reject("Error")}),s.promise},a}]),angular.module("CitrixApp").factory("PartnerStatusService",["$http","$q","APP_URL",function(e,t,r){var a={};return a.getDistributorDetails=function(a){var o=t.defer();return e.get(r.value+"/distributor/getDistributor/"+a).then(function(e){o.resolve(e.data)}),o.promise},a}]),angular.module("CitrixApp").factory("EmailTemplateService",["$http","$q","APP_URL",function(e,t,r){var a={};return a.createEmailTemplate=function(a){var o=t.defer();return e.post(r.value+"/email/create",a).then(function(e){o.resolve(e)},function(e){o.reject("Error")}),o.promise},a.getEmailTemplate=function(a){var o=t.defer();return e.get(r.value+"/email/get/"+a).then(function(e){o.resolve(e)},function(e){o.reject("Error")}),o.promise},a.deleteBannerImage=function(a,o){var n=t.defer();return e.delete(r.value+"/email/delete/bannerImg/?emailType="+a+"&fileName="+o).then(function(e){n.resolve(e)},function(e){n.reject("Error")}),n.promise},a.deleteContentImage=function(a,o){var n=t.defer();return e.get(r.value+"/email/delete/contentImg/?emailType="+a+"&fileName="+o).then(function(e){n.resolve(e)},function(e){n.reject("Error")}),n.promise},a}]),angular.module("CitrixApp").factory("AllDistributorsService",["$http","$q","APP_URL",function(e,t,r){var a={};return a.getAllDistributors=function(){var a=t.defer();return e.get(r.value+"/distributor/getAllDistributor").then(function(e){a.resolve(e.data)},function(e){console.log("Some error occur"),console.log(e),a.reject("Error")}),a.promise},a.removeDistributor=function(a){var o=t.defer();return e.delete(r.value+"/distributor/removeDistributor/"+a,{transformResponse:[function(e){return e}]}).then(function(e){o.resolve(e)},function(e){console.log("Some error occur"),console.log(e),o.reject("Error")}),o.promise},a}]),angular.module("CitrixApp").factory("AddDistributorService",["$http","$q","APP_URL",function(e,t,r){var a={};return a.addDistributor=function(a){var o=t.defer();return e.post(r.value+"/distributor/addDistributor",a,{transformResponse:[function(e){return e}]}).then(function(e){o.resolve(e)},function(e){console.log("Some error occur"),console.log(e),o.reject("Error")}),o.promise},a.getCountriesList=function(){return[{name:"Afghanistan",code:"AF"},{name:"Åland Islands",code:"AX"},{name:"Albania",code:"AL"},{name:"Algeria",code:"DZ"},{name:"American Samoa",code:"AS"},{name:"Andorra",code:"AD"},{name:"Angola",code:"AO"},{name:"Anguilla",code:"AI"},{name:"Antarctica",code:"AQ"},{name:"Antigua and Barbuda",code:"AG"},{name:"Argentina",code:"AR"},{name:"Armenia",code:"AM"},{name:"Aruba",code:"AW"},{name:"Australia",code:"AU"},{name:"Austria",code:"AT"},{name:"Azerbaijan",code:"AZ"},{name:"Bahamas",code:"BS"},{name:"Bahrain",code:"BH"},{name:"Bangladesh",code:"BD"},{name:"Barbados",code:"BB"},{name:"Belarus",code:"BY"},{name:"Belgium",code:"BE"},{name:"Belize",code:"BZ"},{name:"Benin",code:"BJ"},{name:"Bermuda",code:"BM"},{name:"Bhutan",code:"BT"},{name:"Bolivia",code:"BO"},{name:"Bosnia and Herzegovina",code:"BA"},{name:"Botswana",code:"BW"},{name:"Bouvet Island",code:"BV"},{name:"Brazil",code:"BR"},{name:"British Indian Ocean Territory",code:"IO"},{name:"Brunei Darussalam",code:"BN"},{name:"Bulgaria",code:"BG"},{name:"Burkina Faso",code:"BF"},{name:"Burundi",code:"BI"},{name:"Cambodia",code:"KH"},{name:"Cameroon",code:"CM"},{name:"Canada",code:"CA"},{name:"Cape Verde",code:"CV"},{name:"Cayman Islands",code:"KY"},{name:"Central African Republic",code:"CF"},{name:"Chad",code:"TD"},{name:"Chile",code:"CL"},{name:"China",code:"CN"},{name:"Christmas Island",code:"CX"},{name:"Cocos (Keeling) Islands",code:"CC"},{name:"Colombia",code:"CO"},{name:"Comoros",code:"KM"},{name:"Congo",code:"CG"},{name:"Congo, The Democratic Republic of the",code:"CD"},{name:"Cook Islands",code:"CK"},{name:"Costa Rica",code:"CR"},{name:"Cote D'Ivoire",code:"CI"},{name:"Croatia",code:"HR"},{name:"Cuba",code:"CU"},{name:"Cyprus",code:"CY"},{name:"Czech Republic",code:"CZ"},{name:"Denmark",code:"DK"},{name:"Djibouti",code:"DJ"},{name:"Dominica",code:"DM"},{name:"Dominican Republic",code:"DO"},{name:"Ecuador",code:"EC"},{name:"Egypt",code:"EG"},{name:"El Salvador",code:"SV"},{name:"Equatorial Guinea",code:"GQ"},{name:"Eritrea",code:"ER"},{name:"Estonia",code:"EE"},{name:"Ethiopia",code:"ET"},{name:"Falkland Islands (Malvinas)",code:"FK"},{name:"Faroe Islands",code:"FO"},{name:"Fiji",code:"FJ"},{name:"Finland",code:"FI"},{name:"France",code:"FR"},{name:"French Guiana",code:"GF"},{name:"French Polynesia",code:"PF"},{name:"French Southern Territories",code:"TF"},{name:"Gabon",code:"GA"},{name:"Gambia",code:"GM"},{name:"Georgia",code:"GE"},{name:"Germany",code:"DE"},{name:"Ghana",code:"GH"},{name:"Gibraltar",code:"GI"},{name:"Greece",code:"GR"},{name:"Greenland",code:"GL"},{name:"Grenada",code:"GD"},{name:"Guadeloupe",code:"GP"},{name:"Guam",code:"GU"},{name:"Guatemala",code:"GT"},{name:"Guernsey",code:"GG"},{name:"Guinea",code:"GN"},{name:"Guinea-Bissau",code:"GW"},{name:"Guyana",code:"GY"},{name:"Haiti",code:"HT"},{name:"Heard Island and Mcdonald Islands",code:"HM"},{name:"Holy See (Vatican City State)",code:"VA"},{name:"Honduras",code:"HN"},{name:"Hong Kong",code:"HK"},{name:"Hungary",code:"HU"},{name:"Iceland",code:"IS"},{name:"India",code:"IN"},{name:"Indonesia",code:"ID"},{name:"Iran, Islamic Republic Of",code:"IR"},{name:"Iraq",code:"IQ"},{name:"Ireland",code:"IE"},{name:"Isle of Man",code:"IM"},{name:"Israel",code:"IL"},{name:"Italy",code:"IT"},{name:"Jamaica",code:"JM"},{name:"Japan",code:"JP"},{name:"Jersey",code:"JE"},{name:"Jordan",code:"JO"},{name:"Kazakhstan",code:"KZ"},{name:"Kenya",code:"KE"},{name:"Kiribati",code:"KI"},{name:"Korea, Democratic People's Republic of",code:"KP"},{name:"Korea, Republic of",code:"KR"},{name:"Kuwait",code:"KW"},{name:"Kyrgyzstan",code:"KG"},{name:"Lao People's Democratic Republic",code:"LA"},{name:"Latvia",code:"LV"},{name:"Lebanon",code:"LB"},{name:"Lesotho",code:"LS"},{name:"Liberia",code:"LR"},{name:"Libyan Arab Jamahiriya",code:"LY"},{name:"Liechtenstein",code:"LI"},{name:"Lithuania",code:"LT"},{name:"Luxembourg",code:"LU"},{name:"Macao",code:"MO"},{name:"Macedonia, The Former Yugoslav Republic of",code:"MK"},{name:"Madagascar",code:"MG"},{name:"Malawi",code:"MW"},{name:"Malaysia",code:"MY"},{name:"Maldives",code:"MV"},{name:"Mali",code:"ML"},{name:"Malta",code:"MT"},{name:"Marshall Islands",code:"MH"},{name:"Martinique",code:"MQ"},{name:"Mauritania",code:"MR"},{name:"Mauritius",code:"MU"},{name:"Mayotte",code:"YT"},{name:"Mexico",code:"MX"},{name:"Micronesia, Federated States of",code:"FM"},{name:"Moldova, Republic of",code:"MD"},{name:"Monaco",code:"MC"},{name:"Mongolia",code:"MN"},{name:"Montserrat",code:"MS"},{name:"Morocco",code:"MA"},{name:"Mozambique",code:"MZ"},{name:"Myanmar",code:"MM"},{name:"Namibia",code:"NA"},{name:"Nauru",code:"NR"},{name:"Nepal",code:"NP"},{name:"Netherlands",code:"NL"},{name:"Netherlands Antilles",code:"AN"},{name:"New Caledonia",code:"NC"},{name:"New Zealand",code:"NZ"},{name:"Nicaragua",code:"NI"},{name:"Niger",code:"NE"},{name:"Nigeria",code:"NG"},{name:"Niue",code:"NU"},{name:"Norfolk Island",code:"NF"},{name:"Northern Mariana Islands",code:"MP"},{name:"Norway",code:"NO"},{name:"Oman",code:"OM"},{name:"Pakistan",code:"PK"},{name:"Palau",code:"PW"},{name:"Palestinian Territory, Occupied",code:"PS"},{name:"Panama",code:"PA"},{name:"Papua New Guinea",code:"PG"},{name:"Paraguay",code:"PY"},{name:"Peru",code:"PE"},{name:"Philippines",code:"PH"},{name:"Pitcairn",code:"PN"},{name:"Poland",code:"PL"},{name:"Portugal",code:"PT"},{name:"Puerto Rico",code:"PR"},{name:"Qatar",code:"QA"},{name:"Reunion",code:"RE"},{name:"Romania",code:"RO"},{name:"Russian Federation",code:"RU"},{name:"Rwanda",code:"RW"},{name:"Saint Helena",code:"SH"},{name:"Saint Kitts and Nevis",code:"KN"},{name:"Saint Lucia",code:"LC"},{name:"Saint Pierre and Miquelon",code:"PM"},{name:"Saint Vincent and the Grenadines",code:"VC"},{name:"Samoa",code:"WS"},{name:"San Marino",code:"SM"},{name:"Sao Tome and Principe",code:"ST"},{name:"Saudi Arabia",code:"SA"},{name:"Senegal",code:"SN"},{name:"Serbia and Montenegro",code:"CS"},{name:"Seychelles",code:"SC"},{name:"Sierra Leone",code:"SL"},{name:"Singapore",code:"SG"},{name:"Slovakia",code:"SK"},{name:"Slovenia",code:"SI"},{name:"Solomon Islands",code:"SB"},{name:"Somalia",code:"SO"},{name:"South Africa",code:"ZA"},{name:"South Georgia and the South Sandwich Islands",code:"GS"},{name:"Spain",code:"ES"},{name:"Sri Lanka",code:"LK"},{name:"Sudan",code:"SD"},{name:"Suriname",code:"SR"},{name:"Svalbard and Jan Mayen",code:"SJ"},{name:"Swaziland",code:"SZ"},{name:"Sweden",code:"SE"},{name:"Switzerland",code:"CH"},{name:"Syrian Arab Republic",code:"SY"},{name:"Taiwan, Province of China",code:"TW"},{name:"Tajikistan",code:"TJ"},{name:"Tanzania, United Republic of",code:"TZ"},{name:"Thailand",code:"TH"},{name:"Timor-Leste",code:"TL"},{name:"Togo",code:"TG"},{name:"Tokelau",code:"TK"},{name:"Tonga",code:"TO"},{name:"Trinidad and Tobago",code:"TT"},{name:"Tunisia",code:"TN"},{name:"Turkey",code:"TR"},{name:"Turkmenistan",code:"TM"},{name:"Turks and Caicos Islands",code:"TC"},{name:"Tuvalu",code:"TV"},{name:"Uganda",code:"UG"},{name:"Ukraine",code:"UA"},{name:"United Arab Emirates",code:"AE"},{name:"United Kingdom",code:"GB"},{name:"United States",code:"US"},{name:"United States Minor Outlying Islands",code:"UM"},{name:"Uruguay",code:"UY"},{name:"Uzbekistan",code:"UZ"},{name:"Vanuatu",code:"VU"},{name:"Venezuela",code:"VE"},{name:"Vietnam",code:"VN"},{name:"Virgin Islands, British",code:"VG"},{name:"Virgin Islands, U.S.",code:"VI"},{name:"Wallis and Futuna",code:"WF"},{name:"Western Sahara",code:"EH"},{name:"Yemen",code:"YE"},{name:"Zambia",code:"ZM"},{name:"Zimbabwe",code:"ZW"}]},a}]),angular.module("CitrixApp").factory("EditDistributorService",["$http","$q","APP_URL",function(e,t,r){var a={};return a.updateDistributorDetails=function(a){var o=t.defer();return e.put(r.value+"/distributor/editDistributor",a,{transformResponse:[function(e){return e}]}).then(function(e){o.resolve(e)},function(e){console.log("Some Error Occured while Updating ditributor"),console.log(e),o.reject("Error")}),o.promise},a}]),angular.module("CitrixApp").factory("PartnersSurveySurvice",["$http","$q","APP_URL",function(e,t,r){return PartnersSurveySurvice={},PartnersSurveySurvice.getPartnerSurveyResponse=function(a,o,n,s,i){var l=t.defer();return e.get(r.value+"/nps/getAllUsersNPSSurvey?startDate="+o+"&&endDate="+n+"&&project="+s+"&&surveyCompleted="+i).then(function(e){l.resolve(e.data)},function(e){console.log("Some error occur"),console.log(e),l.reject("Error")}),l.promise},PartnersSurveySurvice}]),angular.module("CitrixApp").factory("PartnerService",[function(){return{}}]),angular.module("CitrixApp").factory("AllCategoryService",["$http","$q","APP_URL",function(e,t,r){var a={};return a.getAllCategory=function(){var a=t.defer();return e.get(r.value+"/categories/all").then(function(e){e.data.hasOwnProperty("message")&&a.resolve([]),a.resolve(e.data)},function(e){console.log("Some error occur"),console.log(e),a.reject("Error")}),a.promise},a.getUserActiveProjects=function(){var a=t.defer();return e.get(r.value+"/projects/getUserActiveProjects").then(function(e){e.data.hasOwnProperty("message")&&a.resolve([]),a.resolve(e.data)},function(e){console.log("Some error occur"),console.log(e),a.reject("Error")}),a.promise},a.getUserActiveProjectsByPersonId=function(a){var o=t.defer();return e.get(r.value+"/projects/getUserActiveProjectsByPersonId?personId="+a).then(function(e){e.data.hasOwnProperty("message")&&o.resolve([]),o.resolve(e.data)},function(e){console.log("Some error occur"),console.log(e),o.reject("Error")}),o.promise},a}]),angular.module("CitrixApp").factory("OfferByCategoryService",["$http","$q","APP_URL",function(e,t,r){var a={};return a.getOfferByCategory=function(a){var o=t.defer();return e.get(r.value+"/categories/"+a).then(function(e){e.data.hasOwnProperty("message")?o.resolve([]):o.resolve(e.data)},function(e){console.log("Some error occur"),console.log(e),o.reject("Error")}),o.promise},a}]),angular.module("CitrixApp").factory("OfferDetailsService",["$http","$q","APP_URL",function(e,t,r){var a={};return a.getOfferDetails=function(a){var o=t.defer();return e.get(r.value+"/offers/"+a).then(function(e){o.resolve(e.data)},function(e){console.log("Some error occur"),console.log(e),o.reject("Error")}),o.promise},a}]),angular.module("CitrixApp").factory("CheckOutService",["localStorageService","$http","$q","APP_URL",function(e,t,r,a){var o={};return o.getAllCartItems=function(){var o=r.defer();e.get("partnerUser");return t.get(a.value+"/cart/myCart").then(function(e){e.data.hasOwnProperty("message")?o.resolve([]):o.resolve(e.data[0].partners_projects)},function(e){console.log("Some error occur"),console.log(e),o.reject("Error")}),o.promise},o.deleteItemFromCart=function(e){var o=r.defer();return t.delete(a.value+"/cart/removeCartItem/"+e,{transformResponse:[function(e){return e}]}).then(function(e){200==e.status?o.resolve(e):(console.log("FAIL"),o.resolve(e))},function(e){console.log("Some error occur"),console.log(e),o.reject("Error")}),o.promise},o}]),angular.module("CitrixApp").factory("OrderSummaryService",["$http","$q","localStorageService","$timeout","APP_URL",function(e,t,r,a,o){var n={};return n.getCurrentProject=function(){var a=t.defer();r.get("partnerUser");return e.get(o.value+"/projects/inProgress").then(function(e){e.data.hasOwnProperty("message")?a.resolve([]):a.resolve(e.data)},function(e){console.log("Some error occur"),console.log(e)}),a.promise},n.buyItems=function(r){var a=t.defer();return e.post(o.value+"/cart/addCartAddress",r,{transformResponse:[function(e){return e}]}).then(function(e){e.status,a.resolve(e)},function(e){console.log("Some error occur"),console.log(e),a.reject("Error")}),a.promise},n.findDistEmail=function(r){var a=t.defer();return e.get(o.value+"/users/getUserByOrgID?orgID="+r).then(function(e){a.resolve(e.data)},function(e){console.log("some error occur"),a.reject(e)}),a.promise},n}]),angular.module("CitrixApp").factory("MyOfferService",[function(){return{}}]),angular.module("CitrixApp").factory("MyProjectService",["localStorageService","$http","$q","APP_URL",function(e,t,r,a){var o={};return o.getProjectDetails=function(e){var o=r.defer();return t.get(a.value+"/projects/"+e).then(function(t){t.data.hasOwnProperty("message")?o.resolve([]):(t.data.project_id=e,o.resolve(t.data))},function(e){console.log("Some error occur"),console.log(e)}),o.promise},o.createResource=function(e){var o=r.defer();return t.post(a.value+"/resources/create",e).then(function(e){o.resolve(e.data)},function(e){o.reject(e.data)}),o.promise},o.editResource=function(e){var o=r.defer();return t.put(a.value+"/resources/update",e).then(function(e){o.resolve(e.data)},function(e){o.reject(e.data)}),o.promise},o.removeResource=function(e){var o=r.defer();return t.post(a.value+"/resources/delete",e).then(function(e){o.resolve(e.data)},function(e){o.reject("Error")}),o.promise},o.removeOneResource=function(e){var o=r.defer();return t.post(a.value+"/resources/deleteById",e).then(function(e){o.resolve(e.data)},function(e){o.reject("Error")}),o.promise},o.scheduleResource=function(e){var o=r.defer();return t.post(a.value+"/resources/schedule",e).then(function(e){o.resolve(e.data)},function(e){o.reject("Error")}),o.promise},o.editProjectName=function(e){var o=r.defer();return t.put(a.value+"/projects/update",e).then(function(e){o.resolve(e.data)},function(e){o.reject("Error")}),o.promise},o.createCustomerProjectContacts=function(e){var o=r.defer();return t.post(a.value+"/projectContact/create",e).then(function(e){console.log(e),o.resolve(e.data)},function(e){o.reject("Error")}),o.promise},o.getProjectContactDetails=function(e){var o=r.defer();return t.get(a.value+"/projectContact/"+e).then(function(e){e.data.hasOwnProperty("message")?o.resolve([]):o.resolve(e.data)},function(e){console.log("Some error occur"),console.log(e)}),o.promise},o.editCustomerProjectContacts=function(e){var o=r.defer();return console.log("before update service"),t.put(a.value+"/projectContact/update",e).then(function(e){o.resolve(e.data)},function(e){o.reject("Error")}),o.promise},o.removecustomerProjectContact=function(e){var o=r.defer();return t.delete(a.value+"/projectContact/delete/"+e).then(function(e){o.resolve(e.data)},function(e){o.reject("Error")}),o.promise},o.editPartnersOrgId=function(e){var o=r.defer();return t.put(a.value+"/projects/updateOrgID",e).then(function(e){console.log(e),o.resolve(e.data)},function(e){o.reject("Error")}),o.promise},o}]),angular.module("CitrixApp").factory("MyProjectListService",["localStorageService","$http","$q",function(e,t,r){var a={};return a.getProjectList=function(){var e=r.defer();return e.resolve([{title:"project1",engagementName:"Lorem ipsum dolor sit",purchaseDate:"Nov 15 2016",startDate:"Nov 15 2016",endDate:"Nov 15 2016",status:"pending",totalHours:"76",hoursRemaining:"33",price:"11"},{title:"project2",engagementName:"Lorem ipsum dolor sit",purchaseDate:"Nov 15 2016",startDate:"Nov 15 2016",endDate:"Nov 15 2016",status:"pending",totalHours:"76",hoursRemaining:"33",price:"11"},{title:"project3",engagementName:"Lorem ipsum dolor sit",purchaseDate:"Nov 15 2016",startDate:"Nov 15 2016",endDate:"Nov 15 2016",status:"pending",totalHours:"76",hoursRemaining:"33",price:"11"},{title:"project4",engagementName:"Lorem ipsum dolor sit",purchaseDate:"Nov 15 2016",startDate:"Nov 15 2016",endDate:"Nov 15 2016",status:"pending",totalHours:"76",hoursRemaining:"33",price:"11"}]),e.promise},a}]),angular.module("CitrixApp").factory("OrderInfoService",["$http","$q",function(e,t){return{}}]),angular.module("CitrixApp").factory("AllCategoriesWithOffersService",["$http","$q","APP_URL",function(e,t,r){var a={};return a.getOffersAsPerCategories=function(){var a=t.defer();return e.get(r.value+"/categories/allOffersByCategory").then(function(e){e.data.hasOwnProperty("message")?a.resolve([]):a.resolve(e.data)},function(e){console.log("Some error occur"),console.log(e),a.reject("Error")}),a.promise},a}]),angular.module("CitrixApp").factory("CustomerSurveyService",["$http","$q","APP_URL",function(e,t,r){var a={};return a.getProjectsNPSResponse=function(a,o,n,s,i){var l=t.defer();return e.get(r.value+"/nps/getNPSDetails?startDate="+o+"&&endDate="+n+"&&project="+s+"&&surveyCompleted="+i).then(function(e){l.resolve(e.data)},function(e){console.log("Some error occur"),console.log(e)}),l.promise},a}]),angular.module("CitrixApp").factory("PartnerHeaderService",[function(){return{}}]),angular.module("CitrixApp").factory("AdminHeaderService",["$http","$q","APP_URL",function(e,t,r){var a={};return a.sendSurveyRequest=function(a){var o=t.defer();return e.post(r.value+"/nps/sendNPSSurveyReminderEmailToAll").then(function(e){o.resolve(e.data)},function(e){console.log("Some error occur"),console.log(e),o.reject("Error")}),o.promise},a}]),angular.module("CitrixApp").factory("AddToCartService",["$http","$q","APP_URL",function(e,t,r){var a={};return a.saveCart=function(a){var o=t.defer();return e.post(r.value+"/cart/addCartItem",a,{transformResponse:[function(e){return e}]}).then(function(e){o.resolve(e.data)},function(e){console.log("Some error occur"),console.log(e),o.reject("Error")}),o.promise},a}]),angular.module("CitrixApp").factory("ManageAdminService",["$http","$q","APP_URL",function(e,t,r){var a={};return a.saveAdmin=function(a){var o=t.defer();return e.post(r.value+"/admin/createAdmin",a).then(function(e){o.resolve(e.data)},function(e){o.reject(e.data)}),o.promise},a.getAll=function(){var a=t.defer();return e.get(r.value+"/admin/AdminUserList").then(function(e){a.resolve(e.data)},function(e){a.reject(e.data)}),a.promise},a.removeAdmin=function(a){var o=t.defer();return e.delete(r.value+"/admin?personId="+a).then(function(e){o.resolve(e.data)},function(e){o.reject(e.data)}),o.promise},a}]),angular.module("CitrixApp").factory("ManageUserService",["$http","$q","APP_URL",function(e,t,r){var a={};return a.getAll=function(a,o){var n=t.defer();return e.get(r.value+"/users/userlist?pageNumber="+a+"&pageOffSet="+o).then(function(e){n.resolve(e.data)},function(e){n.reject(e.data)}),n.promise},a.removeUser=function(a){var o=t.defer();return e.delete(r.value+"/users/userlist?id="+a).then(function(e){o.resolve(e.data)},function(e){o.reject(e.data)}),o.promise},a}]),angular.module("CitrixApp").controller("LoginController",["$state","localStorageService","LoginService","USER_ROLES","$rootScope","$window","IdentityURL","MainService","growl",function(e,t,r,a,o,n,s,i,l){var c=this;c.login=function(){o.showSpinner=!0,r.login(c.user).then(function(r){var o={user_profile:{email:r.email,name:r.first_name+" "+r.last_name,first_name:r.first_name,last_name:r.last_name,role:r.role,cust_org_ID:r.cust_org_ID,id_token:r.id_token,person_id:r.person_id}};switch(t.set("token",r.token),null!=r.role&&t.set("id_token",r.id_token),t.set("partnerUser",o),r.role){case"Admin":t.set("login",a.admin),e.go("admin.category");break;case"CITRIXPARTNERS":t.set("login",a.partner),e.go("partner.category");break;case"DISTI":t.set("login",a.disti),e.go("partner.category");break;case null:console.log("Sorry wrong credentials");break;default:console.log("Something is wrong - Contact admin")}},function(e){o.showSpinner=!1,console.log(e),"User does not exist."==e.data.message&&(c.loginStatus=!1),i.logout()})},c.SSOlogin=function(){window.location.href="https://stg-asdp.citrix.com:8080/partnersportal/#/account"}}]),angular.module("CitrixApp").controller("AcsSecureController",["$window","$state","AcsSecureService","localStorageService","$rootScope","$cookies","LOGIN_VIA","APP_URL",function(e,t,r,a,o,n,s,i){var l=this;l.logoUrl=i.value+"/assets/images/citrix-partner-logo.png",o.showSpinner=!0,"localhost"==document.location.hostname&&(o.showSpinner=!1,t.go("login")),l.login=function(){"STS"==s.value?t.go("account"):"OPENID"==s.value&&(e.location.href=l.authorizeUrl)},r.getToken().then(function(r){l.authorizeUrl=r.open_id_autorize_uri+"?state="+r.athena_state+"&client_id="+r.open_id_api_key+"&scope=openid email profile ctx_principal_aliases&response_type=code&redirect_uri="+r.open_id_encoded_redirect_uri+"&credential_type=user",a.set("open_id_logout_uri",r.open_id_logout_uri),a.set("open_id_project_uri",r.open_id_project_uri),a.set("devLogin",r.devLogin),"OPENID"==s.value&&a.get("loggedIn")?e.location.href=l.authorizeUrl:"STS"==s.value&&a.get("loggedIn")?t.go("account"):o.showSpinner=!1,n.put("athena_state",r.athena_state)},function(e){})}]),angular.module("CitrixApp").controller("AcsController",["$timeout","$state","$stateParams","localStorageService","LoginService","$window","$rootScope","$location","USER_ROLES","MainService","logoutUrl","growl","$cookies",function(e,t,r,a,o,n,s,i,l,c,d,p,u){var m=this;s.showSpinner=!0,a.set("token",r.token),o.ssologin(r.token).then(function(e){var r={user_profile:{email:e.email,name:e.first_name+" "+e.last_name,first_name:e.first_name,last_name:e.last_name,role:e.role,company:e.company_name,person_id:e.person_id,cust_org_ID:e.cust_org_ID}},o=e.role;switch(a.set("loggedIn",!0),a.set("name",e.first_name+" "+e.last_name),a.set("partnerUser",r),o){case"Admin":a.set("login",l.admin),t.go("admin.category");break;case"CITRIXPARTNERS":a.set("login",l.partner),t.go("partner.category");break;case"DISTI":a.set("login",l.disti),t.go("partner.category");break;case null:console.log("Not Authorized"),t.go("error",{errorCode:2});break;default:console.log("Something is wrong - Contact admin")}},function(e){s.showSpinner=!1,console.log(e),"User does not exist."==e.data.message&&(m.loginStatus=!1),c.logout()})}]),angular.module("CitrixApp").controller("MainController",["$state","$rootScope","MainService",function(e,t,r){this.$state=e,t.showSpinner=!1,this.logout=function(){r.logout()}}]),angular.module("CitrixApp").controller("AdminDashboardController",[function(){}]),angular.module("CitrixApp").controller("AllOffersController",["$scope","$rootScope","$state","AllOffersService","localStorageService","deviceDetector","APP_URL",function(e,t,r,a,o,n,s){var i=this;t.showSpinner=!0,i.offers={};o.get("partnerUser");i.categoryDetails=o.get("categoryDetailsAdmin");var l=i.categoryDetails.categoryId,c=i.categoryDetails.categoryName;i.editImgUrl=s.value+"/assets/images/edit.png",i.deleteImgUrl=s.value+"/assets/images/delete.png";var d={headers:!0,sheetid:c};a.getAllOffers(l).then(function(e){i.offers=e,t.showSpinner=!1},function(e){}),i.selectedOffer=function(e){r.go("admin.offerDetails",{offerID:e})},i.editOffer=function(e){r.go("admin.editOffer",{offerId:e,categoryId:l},{location:!1})},i.previewOffer=function(){var e={categoryId:l,categoryName:c,categoryDescription:i.categoryDetails.categoryDescription,role:"ADMIN"};o.set("categoryDetails",e),r.go("admin.previewOffer")},i.removeOffer=function(e){a.removeOffers(e).then(function(t){for(var r=-1,a=0;a<i.offers.length;a++)i.offers[a].id==e&&(r=a);r>-1&&i.offers.splice(r,1)},function(e){swal({title:"Can not be deleted!",text:"This Offer is already purchased by Partner.",timer:3e3,showConfirmButton:!1})})},i.createNewOffer=function(){r.go("admin.createOffer",{categoryId:l},{location:!1})},i.exportToExcel=function(){if("safari"==n.browser)swal({title:"Warning !",text:"Excel Export feature work in all browser except Safari !",timer:4e3,showConfirmButton:!1});else if(0!=i.offers.length){for(var e,t=[],r=0;r<i.offers.length;r++)e={"Serial No.":r+1,"Offer Name":i.offers[r].offer_name,"Offer Description":i.offers[r].offer_description,Sku:i.offers[r].sku,"Sku Description":i.offers[r].sku_description,Price:"$"+i.offers[r].price.toFixed(2),Hours:i.offers[r].no_of_hours},t.push(e);alasql('SELECT * INTO XLSX("'+c+'"+" Offerings "+GETDATE()+".xlsx", ?) FROM ?',[d,t])}},i.exportToPDF=function(){var e=new Date;e=e.toUTCString().replace(/\s*(GMT|UTC)$/,"");var t=[];i.offers.forEach(function(e,r){t.push([r+1,e.offer_name,e.offer_description,e.sku,e.sku_description,"$"+e.price.toFixed(2),e.no_of_hours])});var r=new jsPDF("p","pt","a4");r.text(c,40,35),r.autoTable(["Serial No.","Offer Name","Description","Sku","Sku Description","Price","Hours"],t,{startY:60,theme:"grid",styles:{overflow:"linebreak",pageBreak:"auto",columnWidth:"auto"},headerStyles:{fillColor:[0,161,224],textColor:[255,255,255],halign:"center"}}),0!=i.offers.length&&r.save(c+" Offerings "+e+".pdf")}}]),angular.module("CitrixApp").controller("CreateOfferController",["$state","$stateParams","CreateOfferService","AllCategoryService",function(e,t,r,a){var o=this;o.offer={ready_to_buy:"Y"},o.createOffer=function(){o.offer.category_code=t.categoryId,r.createOffer(o.offer).then(function(t){e.go("admin.offers",{categoryId:o.offer.category_code})},function(e){})},o.creationCancel=function(){e.go("admin.offers",{categoryId:o.offer.category_code})}}]),angular.module("CitrixApp").controller("EditOfferController",["$scope","$state","$stateParams","EditOfferService","OfferDetailsService",function(e,t,r,a,o){var n=this;o.getOfferDetails(r.offerId).then(function(e){n.offer=e,n.recoverOffer=angular.copy(n.offer)},function(e){}),n.updateOffer=function(o){swal({title:"Are you sure?",text:"You want to update Offer!",showCancelButton:!0,confirmButtonColor:"#00a1e0",confirmButtonText:"Yes, Update it!",closeOnConfirm:!0,closeOnCancel:!0},function(s){s?a.updateOffer(o).then(function(e){t.go("admin.offers",{categoryId:r.categoryId})},function(e){}):(n.offer=angular.copy(n.recoverOffer),e.$apply())})},n.updateCancel=function(){t.go("admin.offers",{categoryId:r.categoryId})}}]),angular.module("CitrixApp").controller("EditCategoryController",["$scope","$state","$stateParams","EditCategoryService",function(e,t,r,a){var o=this;a.getCategoryDetails(r.categoryId).then(function(e){o.category=e,o.recoverCategory=angular.copy(o.category)},function(e){}),o.updateCategory=function(){swal({title:"Are you sure?",text:"You want to update Category!",showCancelButton:!0,confirmButtonColor:"#00a1e0",confirmButtonText:"Yes, Update it!",closeOnConfirm:!0,closeOnCancel:!0},function(r){r?a.updateCategory(o.category).then(function(e){t.go("admin.category")},function(e){swal({title:"Can not be Updated!",text:"Category Name already exists",timer:4e3,showConfirmButton:!1})}):(o.category=angular.copy(o.recoverCategory),e.$apply())})}}]),angular.module("CitrixApp").controller("AdminOfferDetailsController",["$state","$stateParams","OfferDetailsService","AllOffersService",function(e,t,r,a){var o=this;o.offer={},r.getOfferDetails(t.offerID).then(function(e){o.offer=e},function(e){}),o.editOffer=function(t){e.go("admin.editOffer",{offerId:t})},o.removeOffer=function(t){a.removeOffers(t).then(function(t){e.go("admin.category")},function(e){})}}]),angular.module("CitrixApp").controller("AdminAllCategoryController",["$scope","$state","AdminAllCategoryService","AllCategoryService","localStorageService","$rootScope","$timeout","APP_URL",function(e,t,r,a,o,n,s,i){var l=this;n.showSpinner=!0,l.categories={},l.partnerNameSuggestions=[],l.partnerNameSuggestions=o.get("partnerNameSuggestions"),l.editImgUrl=i.value+"/assets/images/edit.png",l.deleteImgUrl=i.value+"/assets/images/delete.png",a.getAllCategory().then(function(e){l.categories=e,n.showSpinner=!1},function(e){n.showSpinner=!1}),l.selectedCategory=function(e,r,a){var n={categoryId:e,categoryName:r,categoryDescription:a};o.set("categoryDetailsAdmin",n),t.go("admin.offers")},l.createCategory=function(){t.go("admin.createCategory",{},{location:!1})},l.partnerStatus=function(){var e=!1;if(null!=l.partnerNameSuggestions)for(var r=0;r<l.partnerNameSuggestions.length;r++)l.partnerNameSuggestions[r]==l.projectName&&(e=!0),l.partnerNameSuggestions.length>4&&l.partnerNameSuggestions.shift();e||(null==l.partnerNameSuggestions?(l.partnerNameSuggestions=[l.projectName],o.set("partnerNameSuggestions",l.partnerNameSuggestions)):(l.partnerNameSuggestions.push(l.projectName),o.set("partnerNameSuggestions",l.partnerNameSuggestions))),t.go("admin.allPartnerStatus",{projectName:l.projectName})},l.selectAllPartnerStatus=function(){t.go("admin.allPartnerStatus")},l.removeCategory=function(e){r.removeCategories(e).then(function(t){for(var r=-1,a=0;a<l.categories.length;a++)l.categories[a].id==e&&(r=a);r>-1&&l.categories.splice(r,1)},function(e){swal({title:"Can not be deleted!",text:"Some offerings are already purchased by partners.",timer:3e3,showConfirmButton:!1})})},l.editCategory=function(e){t.go("admin.editCategory",{categoryId:e},{location:!1})}}]),angular.module("CitrixApp").controller("CreateCategoryController",["$state","$stateParams","CreateCategoryService",function(e,t,r){var a=this;a.createCategory=function(){a.category.category_code=t.categoryId,r.createCategory(a.category).then(function(t){e.go("admin.category")},function(e){swal({title:"Error",text:"Duplicate name or description",showConfirmButton:!0})})}}]),angular.module("CitrixApp").controller("AllPartnersStatusController",["$scope","$rootScope","$state","$stateParams","AllPartnersStatusService","localStorageService","deviceDetector","$filter","$document","$uibModal",function(e,t,r,a,o,n,s,i,l,c){function d(){u.enableSpinner=!0,""!=u.searchBy.start_date&&(u.searchBy.start_date=new Date(u.searchBy.start_date).getTime()),""!=u.searchBy.end_date&&(u.searchBy.end_date=new Date(u.searchBy.end_date).getTime()),""!=u.searchBy.purchase_date&&(u.searchBy.purchase_date=new Date(u.searchBy.purchase_date).getTime()),o.getAllPartnerStatus(u.currentPage,u.pageOffset,u.searchBy).then(function(e){u.projects=e.user_responses,u.initialProjects=e.user_responses,u.totalCount=e.total_no_of_users,p(u.projects),t.showSpinner=!1,u.enableSpinner=!1},function(e){})}function p(e){var t=[];if(m=[],u.confirmed=[],u.exportBehaviour=!0,u.isAllSelected&&(u.isAllSelected=!1),u.exportProjects=[],void 0!=e&&null!=e&&0!=e.length)for(var r=0;r<e.length;r++){m.push(e[r].company_name),u.exportProjects.push([]);var a=0,o=e[r].partnersProjectResponseBOs;if(null!=o)for(var n=0;n<o.length;n++){var s=o[n],i=new Date(parseInt(s.end_date));s.end_date_utc=new Date(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds());var l=new Date(parseInt(s.start_date));s.start_date_utc=new Date(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate(),l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds());var c=new Date(parseInt(s.purchase_date));s.po_date_utc=new Date(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate(),c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds()),a+=1,t.push([]),sheetJson={Partner_Name:"","Serial_No.":a,Po_Number:s.po_number,Sold_To_Bill_To_Org_ID:s.sold_to_bill_to_org_ID,Ship_To_Party_End_User_Org_ID:s.customer_org_id,Bill_To_Customer_Name_and_Org_ID:s.bill_to_customer_name_and_org_ID,Bill_To_Country:s.bill_to_country,End_User_Name:s.customer_name,End_User_Company_Address:s.end_user_company_address,End_User_Company_City:s.customer_city,End_User_Company_State:s.customer_state,End_User_Company_Country:s.customer_country,End_User_Company_Postal_Code:s.customer_pincode,PO_Date:moment(s.po_date_utc).format("MMM DD YYYY"),Currency:s.currency,Form_Header:s.sku_description,SKU:s.sku,Quantity:s.quantity,Price:"$"+s.total_price.toFixed(2),Start_Date:moment(s.start_date_utc).format("MMM DD YYYY"),End_Date:moment(s.end_date_utc).format("MMM DD YYYY")},u.exportProjects[r].push(t[n]=sheetJson)}}}var u=this;t.showSpinner=!0,u.currentPage=1,u.pageOffset=10,u.maxSize=5,u.searchBy={project_name:"",start_date:"",end_date:"",purchase_date:"",complete:"",InProgress:"",open:""},e.today=function(){e.startDate=new Date,e.endDate=new Date,e.purchaseDate=new Date},e.today(),e.inlineOptions={customClass:function(t){var r=t.date;if("day"===t.mode)for(var a=new Date(r).setHours(0,0,0,0),o=0;o<e.events.length;o++)if(a===new Date(e.events[o].date).setHours(0,0,0,0))return e.events[o].status;return""},minDate:new Date,showWeeks:!0},e.dateOptions={formatYear:"yy",maxDate:new Date(2020,12,31),minDate:new Date(2e3,1,1),startingDay:1},e.dateOptionsEnd={formatYear:"yy",maxDate:new Date(2020,12,31),minDate:new Date(2e3,1,1),startingDay:1},e.formats=["MMM dd yyyy"],e.format=e.formats[0],e.popup1={opened:!1},e.popup2={opened:!1},e.popup3={opened:!1},e.open1=function(){e.popup1.opened=!0},e.open2=function(){e.popup2.opened=!0},e.open3=function(){e.popup3.opened=!0},e.$watch("APSController.searchBy.start_date",function(t){e.dateOptionsEnd.minDate=new Date(t),e.dateOptionsEnd.maxDate=new Date(new Date(t).setMonth(new Date(t).getMonth()+96))}),e.$watch("APSController.searchBy.end_date",function(t){e.dateOptions.maxDate=new Date(t),e.dateOptions.minDate=new Date(new Date(t).setMonth(new Date(t).getMonth()-96))}),u.projects=[],u.initialProjects=[],u.exportProjects=[],u.confirmed=[];var m=[];u.searchBy.project_name=a.projectName,u.getExportsProjectList=p,u.getAllPartnerStatus=d;n.get("partnerUser");var g={headers:!0,sheetid:"All Partner Status",column:{style:{Font:{Bold:"1"}}}};u.clearAllFilters=function(){u.searchBy.project_name="",u.searchBy.start_date="",u.searchBy.end_date="",u.searchBy.purchase_date="",u.searchBy.complete="",u.searchBy.InProgress="",u.searchBy.open="",d()},u.open=function(e){var t=angular.element(l[0].querySelector("body"));c.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"myModalContent.html",resolve:{proj:function(){return e}},controller:["$scope","proj",function(e,t){e.proj=t}],appendTo:t})},d(),u.toggleAll=function(){var e=!u.isAllSelected;u.isAllSelected=!u.isAllSelected;for(var t=0;t<u.projects.length;t++)u.confirmed[t]=e;u.exportFunction()},u.optionToggled=function(){u.exportFunction(),u.isAllSelected=u.projects.every(function(e){return e.selected});for(var e=0,t=0;t<u.projects.length;t++)1==u.confirmed[t]?++e:--e;e==u.confirmed.length&&(u.isAllSelected=!u.isAllSelected)},u.exportFunction=function(){if(null!=u.confirmed){for(var e=[],t=Object.keys(u.confirmed),r=0;r<Object.keys(u.confirmed).length;r++)1==u.confirmed[t[r]]&&0!=u.exportProjects[t[r]].length&&e.push(u.exportProjects[t[r]]);0!=e.length?u.exportBehaviour=!1:u.exportBehaviour=!0}},u.exportFunction(),u.selectedProjectStatus=function(e){r.go("",{project:e})},u.orderByMe=function(e){u.myOrderBy=e},u.exportToExcel=function(e){if("safari"==s.browser)swal({title:"Warning !",text:"Excel Export feature work in all browser except Safari !",timer:4e3,showConfirmButton:!1});else if(null!=u.confirmed){for(var t=[],r=0,a=[],o=[],n=Object.keys(u.confirmed),i=0;i<Object.keys(u.confirmed).length;i++)if(1==u.confirmed[n[i]]&&0!=u.exportProjects[n[i]].length){r+=1;var l=m[n[i]];null==l?l="":l.length>27&&(l=l.substring(0,27)),t.push({sheetid:r+". "+l,header:!0}),o.push([{Company_Name:m[n[i]],"Serial_No.":"",Po_Number:"",Sold_To_Bill_To_Org_ID:"",Ship_To_Party_End_User_Org_ID:"",Bill_To_Customer_Name_and_Org_ID:"",Bill_To_Country:"",End_User_Name:"",End_User_Company_Address:"",End_User_Company_City:"",End_User_Company_State:"",End_User_Company_Country:"",End_User_Company_Postal_Code:"",PO_Date:"",Currency:"",Form_Header:"",SKU:"",Quantity:"",Price:"",Start_Date:"",End_Date:""}]),a.push(u.exportProjects[n[i]]);for(var c=0;c<u.exportProjects[n[i]].length;c++)"multiple"==e&&delete u.exportProjects[n[i]][c].Partner_Name}if(0!=a.length&&"single"==e){for(var d=[],p=0;p<t.length;p++){var f=alasql("SELECT * FROM ?",[a[p],{headers:!0}]),h=alasql("SELECT * FROM ?",[o[p],{headers:!0}]);d=d.concat(h,f)}alasql('SELECT * INTO XLSX("All Partner Status Single Sheet "+GETDATE()+".xlsx",?) FROM ?',[g,d])}else 0!=a.length&&"multiple"==e&&(alasql('SELECT INTO XLSX("All Partner Status Multi Sheet "+GETDATE()+".xlsx",?) FROM ?',[t,a]),t=[])}},u.exportToPDF=function(){var e=new Date;e=e.toUTCString().replace(/\s*(GMT|UTC)$/,"");var t=new jsPDF("l","pt","a4"),r=["No","Po Number","Sold To Bill To OrgID","Ship To Party End User OrgID","Bill To Customer Name and OrgID","Bill To Country","End User Name","End User Company Address","End User Company City","End User Company State","End User Company Country","End User Company Postal Code","PO Date","Currency","Form Header","SKU","Quantity","Price","Start Date","End Date"],a=[];if(null!=u.confirmed){for(var o=[],n=Object.keys(u.confirmed),s=0;s<Object.keys(u.confirmed).length;s++)1==u.confirmed[n[s]]&&0!=u.exportProjects[n[s]].length&&(a.push(u.exportProjects[n[s]]),o.push({sheetid:m[n[s]],header:!0}));!function(e,a){if(0!=e.length){var o=[];if(e[0].forEach(function(e,t){o.push([t+1,e.Po_Number,e.Sold_To_Bill_To_Org_ID,e.Ship_To_Party_End_User_Org_ID,e.Bill_To_Customer_Name_and_Org_ID,e.Bill_To_Country,e.End_User_Name,e.End_User_Company_Address,e.End_User_Company_City,e.End_User_Company_State,e.End_User_Company_Country,e.End_User_Company_Postal_Code,e.PO_Date,e.Currency,e.Form_Header,e.SKU,e.Quantity,e.Price,e.Start_Date,e.End_Date])}),t.text(a[0].sheetid,40,45),t.autoTable(r,o,{startY:60,theme:"grid",styles:{overflow:"linebreak",pageBreak:"auto",columnWidth:"auto"},headerStyles:{fillColor:[0,161,224],textColor:[255,255,255],halign:"center"}}),e.length>1)for(var n=1;n<e.length;n++)o=[],e[n].forEach(function(e,t){o.push([t+1,e.Po_Number,e.Sold_To_Bill_To_Org_ID,e.Ship_To_Party_End_User_Org_ID,e.Bill_To_Customer_Name_and_Org_ID,e.Bill_To_Country,e.End_User_Name,e.End_User_Company_Address,e.End_User_Company_City,e.End_User_Company_State,e.End_User_Company_Country,e.End_User_Company_Postal_Code,e.PO_Date,e.Currency,e.Form_Header,e.SKU,e.Quantity,e.Price,e.Start_Date,e.End_Date])}),t.text(a[n].sheetid,40,t.autoTableEndPosY()+45),t.autoTable(r,o,{startY:t.autoTableEndPosY()+60,theme:"grid",styles:{overflow:"linebreak",pageBreak:"auto",columnWidth:"auto"},headerStyles:{fillColor:[0,161,224],textColor:[255,255,255],halign:"center"}});a=[],e=[]}}(a,o);n=Object.keys(u.confirmed);var i=!1;for(s=0;s<Object.keys(u.confirmed).length;s++)1==u.confirmed[n[s]]&&(i=!0);1==i&&0!=a.length&&t.save("All Partner Status "+e+".pdf")}}}]),angular.module("CitrixApp").controller("PartnerStatusController",["$scope","$rootScope","$window","$stateParams","AllCategoryService","localStorageService","deviceDetector","$filter","PartnerStatusService",function(e,t,r,a,o,n,s,i,l){function c(){p.statusFlag=[],"Complete"===p.searchBy.complete&&p.statusFlag.push(p.searchBy.complete),"In Progress"===p.searchBy.InProgress&&p.statusFlag.push(p.searchBy.InProgress),"Open"===p.searchBy.open&&p.statusFlag.push(p.searchBy.open);var e=i("partnersFilter")(u,p.searchBy.project_name,p.searchBy.start_date,p.searchBy.end_date,p.searchBy.purchase_date,p.statusFlag,p.searchBy.category_name);p.exportProjects=[],d(e)}function d(e){p.categoryList=["All"];for(var t=0;t<e.length;t++){var r=e[t].categoryBOs;if(null!=r)for(var a=0;a<r.length;a++){p.categoryList.push(r[a].category_name);var o=r[a].partners_projects;if(null!=o)for(var n=0;n<o.length;n++)if(null!=o[n]){o[n].category_name=r[a].category_name,o[n].price="$"+o[n].total_price.toFixed(2);var s=new Date(parseInt(o[n].purchase_date));o[n].po_date_utc=new Date(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate(),s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds());var i=new Date(parseInt(o[n].end_date));o[n].end_date_utc=new Date(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds());var l=new Date(parseInt(o[n].start_date));o[n].start_date_utc=new Date(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate(),l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds()),p.exportProjects.push(o[n])}}}}var p=this;t.showSpinner=!0;var u=[];p.exportProjects=[],p.partnerName=n.get("partnerUser"),p.searchBy={},p.fullName;var m={headers:!0,column:{style:{Font:{Bold:"1"}}}};e.today=function(){e.startDate=new Date,e.endDate=new Date,e.purchaseDate=new Date},e.today(),e.inlineOptions={customClass:function(t){var r=t.date;if("day"===t.mode)for(var a=new Date(r).setHours(0,0,0,0),o=0;o<e.events.length;o++)if(a===new Date(e.events[o].date).setHours(0,0,0,0))return e.events[o].status;return""},minDate:new Date,showWeeks:!0},e.dateOptions={formatYear:"yy",maxDate:new Date(2020,12,31),minDate:new Date(2e3,1,1),startingDay:1},e.dateOptionsEnd={formatYear:"yy",maxDate:new Date(2020,12,31),minDate:new Date(2e3,1,1),startingDay:1},e.popup1={opened:!1},e.popup2={opened:!1},e.popup3={opened:!1},e.open1=function(){e.popup1.opened=!0},e.open2=function(){e.popup2.opened=!0},e.open3=function(){e.popup3.opened=!0},e.formats=["MMM dd yyyy"],e.format=e.formats[0],e.$watch("PSController.searchBy.start_date",function(t){e.dateOptionsEnd.minDate=new Date(t),e.dateOptionsEnd.maxDate=new Date(new Date(t).setMonth(new Date(t).getMonth()+96))}),e.$watch("PSController.searchBy.end_date",function(t){e.dateOptions.maxDate=new Date(t),e.dateOptions.minDate=new Date(new Date(t).setMonth(new Date(t).getMonth()-96))}),p.filter=c,p.clearAllFilters=function(){p.searchBy.project_name="",p.searchBy.start_date="",p.searchBy.end_date="",p.searchBy.purchase_date="",p.searchBy.complete="",p.searchBy.InProgress="",p.searchBy.open="",p.searchBy.category_name="",c()},o.getUserActiveProjectsByPersonId(a.personId).then(function(e){u.push(e),p.companyName=e.company_name,m.sheetid=p.companyName,p.fullName=e.first_name+" "+e.last_name,d(u),t.showSpinner=!1},function(e){}),p.exportToExcel=function(){"safari"==s.browser?swal({title:"Warning !",text:"Excel Export feature work in all browser except Safari !",timer:4e3,showConfirmButton:!1}):0!=p.exportProjects.length&&(angular.forEach(p.exportProjects,function(e,t){e.start_date_utc=moment(e.start_date_utc).format("MMM DD YYYY"),e.end_date_utc=moment(e.end_date_utc).format("MMM DD YYYY"),e.po_date_utc=moment(e.po_date_utc).format("MMM DD YYYY")}),alasql('SELECT po_number AS Po_Number, sold_to_bill_to_org_ID AS Sold_To_Bill_To_Org_ID, customer_org_id AS Ship_To_Party_End_User_Org_ID, bill_to_customer_name_and_org_ID AS Bill_To_Customer_Name_and_Org_ID, bill_to_country AS Bill_To_Country, customer_name AS End_User_Name, end_user_company_address AS End_User_Company_Address, customer_city AS End_User_Company_City, customer_state AS End_User_Company_State, customer_country AS End_User_Company_Country, customer_pincode AS End_User_Company_Postal_Code, po_date_utc AS PO_Date, currency AS Currency, sku_description AS Form_Header, sku AS SKU, quantity AS Quantity, price AS Price, start_date_utc AS Start_Date, end_date_utc AS End_Date INTO XLSX("My Projects Details"+GETDATE()+".xlsx", ?) FROM ?',[m,p.exportProjects]))},p.exportToPDF=function(){var e=new Date;e=e.toUTCString().replace(/\s*(GMT|UTC)$/,"");var t=[];p.exportProjects.forEach(function(e,r){null!=e&&t.push([r+1,e.po_number,e.sold_to_bill_to_org_ID,e.customer_org_id,e.bill_to_customer_name_and_org_ID,e.bill_to_country,e.customer_name,e.end_user_company_address,e.customer_city,e.customer_state,e.customer_country,e.customer_pincode,moment(e.po_date_utc).format("MMM DD YYYY"),e.currency,e.sku_description,e.sku,e.quantity,e.price,moment(e.start_date_utc).format("MMM DD YYYY"),moment(e.end_date_utc).format("MMM DD YYYY")])});var r=new jsPDF("l","pt","a4");null==p.companyName&&(p.companyName=""),r.text(p.companyName,40,35),r.autoTable(["No","Po Number","Sold To Bill To OrgID","Ship To Party End User OrgID","Bill To Customer Name and OrgID","Bill To Country","End User Name","End User Company Address","End User Company City","End User Company State","End User Company Country","End User Company Postal Code","PO Date ","Currency","Form Header","SKU","Quantity","Price","Start Date","End Date"],t,{startY:60,theme:"grid",styles:{overflow:"linebreak",pageBreak:"auto",columnWidth:"auto"},headerStyles:{fillColor:[0,161,224],textColor:[255,255,255],halign:"center"}}),r.setProperties({title:"Test PDF Document",subject:"Export Pdf In tabular format",author:"sasne.prasanna@atmecs.com",keywords:"generated, javascript, web 2.0, ajax",overflow:"linebreak"}),0!=p.exportProjects.length&&r.save(e+".pdf")},p.orderByMe=function(e){p.myOrderBy=e}}]),angular.module("CitrixApp").controller("EmailTemplateController",["$state","$rootScope","$scope","EmailTemplateService","$sce","$document","$uibModal","Upload","IMAGE_URL","APP_URL",function(e,t,r,a,o,n,s,i,l,c){var d=this;t.showSpinner=!0;var p="https://s3.amazonaws.com/dev-sdp-s3-us/img-banner-1495027864922.png";d.deleteImgUrl=c.value+"/assets/images/delete.png",d.email_type="email_for_proj_purchase",d.emailTypeList=[{type:"Template for order confirmation",value:"email_for_proj_purchase"},{type:"Template for project status @ 25% remaining",value:"email_for_proj_25_left"},{type:"Template for project closure (NPS)",value:"email_for_proj_completion"},{type:"Template for Distributor",value:"email_for_distributor"}],d.getEmailTemplate=function(e){void 0==e&&(e=d.email_type),a.getEmailTemplate(e).then(function(r){null==r.data.email_type&&(d.email_type=e),d.email=r.data,null!=d.email.email_banner?d.filePreview=p+d.email.email_banner:d.filePreview=null,null!=d.email.email_file?d.contentPreview=p+d.email.email_file:d.contentPreview=null,angular.element("input[type='file']").val(null),t.showSpinner=!1},function(e){})},d.getEmailTemplate(),d.createEmailTemplate=function(){d.email.email_type=d.email_type,d.email.email_description=d.email.email_description.replace(/word-break: break-all;/gi,""),d.email.email_signature=d.email.email_signature.replace(/word-break: break-all;/gi,""),null==d.email.email_banner_text&&(d.email.email_banner_text=" "),null!=d.email.email_file&&null!=d.email.email_banner?d.email.complete_email='<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width, initial-scale=1.0"><style type="text/css">@media screen {}@font-face {font-family: Netto;src: url("assets/lib/NettoOffcPro.woff") format("woff"), url("assets/lib/NettoOffcPro.ttf") format("truetype");}</style></head><body style= "width:70%; margin: auto; font-family:Netto"><center><tbody><tr><td align="center" valign="top" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;"></td></tr><br /><tr><td align="center" valign="top" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;"><table border="0" cellpadding="0" cellspacing="0" width="100%" id="templateHeader" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;background-color: #F4F4F4;border-top: 0px solid #FFFFFF;border-bottom: 1px solid #CCCCCC;border-collapse: collapse !important; font-family: Netto;"><tbody><tr><td></td> <td rowspan=2 valign="top" class="headerContent" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;color: #505050;font-size: 20px;font-weight: bold;line-height: 100%;padding-top: 0;padding-right: 0;padding-bottom: 0;padding-left: 0;text-align: left;vertical-align: middle;"><img src="'+p+'" style=" width: 100%;outline: none;text-decoration: none;line-height: 100%;border: 0;-ms-interpolation-mode: bicubic;height: auto;" id="headerImage" mc:label="header_image" mc:edit="header_image" mc:allowdesigner="" mc:allowtext=""></td></tr><tr> <td colspan=2><p class="banner-text" Style="color: white; font-size: 16px; padding-bottom: 10%; padding-right: 285px; margin-left: 10px; font-weight: bold;">'+d.email.email_banner_text+'</p></td> </tr></tbody></table></td></tr><tr><td align="center" valign="top" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;"><table border="0" cellpadding="0" cellspacing="0" width="100%" id="templateBody" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse !important;  font-family: Netto;"><tbody style="background-color: white"><tr><td valign="top" class="bodyContent" mc:edit="body_content00" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;color: #505050;background-color: white;font-size: 14px;line-height: 150%;padding-top: 10px;padding-right: 40px;padding-bottom: 10px;padding-left: 40px;text-align: left;"><span class="header3" style="display: block;font-size: small;font-style: normal;font-weight: normal;line-height: 100%;letter-spacing: normal;margin-right: 0;margin-bottom: 10px;margin-left: 0;text-align: left;color: #63666A !important;"><div><br>PROJECT_NAME</div><div><br></div>'+d.email.email_description+'</span></td></tr><tr><td class="bodyContent" style="padding-top: 10px;padding-bottom: 10px;mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;color: #505050;background-color: white;font-size: 14px;line-height: 150%;padding-right: 40px;padding-left: 40px;text-align: left;"><img src="'+p+'" style="width:100%;outline: none;text-decoration: none;line-height: 100%;border: 0;-ms-interpolation-mode: bicubic;display: inline;height: auto;" id="bodyImage" mc:label="body_image" mc:edit="body_image" mc:allowtext=""></td></tr><tr><td valign="top" class="bodyContent" mc:edit="body_content01" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;color: #505050;background-color: white;font-size: 14px;line-height: 150%;padding-top: 10px;padding-right: 40px;padding-bottom: 10px;padding-left: 40px;text-align: left"><table border="0" cellspacing="0" cellpadding="0" class="mobile-button-container" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse !important;"><tbody><tr><td style="background-color:rgb(24, 121, 185); padding: 12px; border-radius: 25px"><a href="'+d.email.email_hyperlink+'" style="color: #ffffff">'+d.email.email_hyperlink_text+'</a></td></tr></tbody></table><table border="0" cellspacing="0" cellpadding="0" class="mobile-button-container" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse !important;"><tbody><tr><td><strong>NPS Qualtrics Survey Link:</strong></td></tr><br><tr><td style="background-color:rgb(24, 121, 185); text-align: center; padding: 12px; border-radius: 25px;"><a href=NPS_QUALTRICS_MAIL_SERVICW style="color: #ffffff">Take Survey</a></td></tr></tbody></table><br><table border="0" cellspacing="0" cellpadding="0" class="mobile-button-container" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse !important;"><tr><td valign="top" class="footerContent" style="padding-top: 10px;mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;color: #808080;background-color: white;font-size: 14px;line-height: 150%;padding-right: 10px;padding-bottom: 10px;text-align: left;font-family: Netto !important;" mc:edit="footer_content01">'+d.email.email_signature+'</td></tr></table></td></tr><tr><td align="center" style="padding-top: 5px;mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;" class="padding"></td></tr></tbody></table></td></tr><hr /><tr><td align="center" valign="top" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;"><table border="0" cellpadding="0" cellspacing="0" width="100%" id="templateFooter" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%; background-color: #ffffff;border-top: 1px solid #FFFFFF;border-collapse: collapse !important; font-family: Netto;"><tbody><tr><td valign="top" class="footerContent" mc:edit="footer_content00" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;color: #808080;background-color: white;font-size: 10px;line-height: 150%;padding-top: 10px;padding-right: 10px;padding-bottom: 10px;padding-left: 10px;text-align: left;"><a href="https://twitter.com/citrix" style="-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;color: #606060;font-weight: normal;text-decoration: underline;">Follow on Twitter</a>&nbsp;&nbsp;&nbsp;<a href="https://www.facebook.com/Citrix/" style="-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;color: #606060;font-weight: normal;text-decoration: underline;">Friend on Facebook</a>&nbsp;&nbsp;&nbsp;<a href="https://plus.google.com/+citrix" style="-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;color: #606060;font-weight: normal;text-decoration: underline;">Join Google Plus</a>&nbsp;</td></tr><tr><td valign="top" class="footerContent" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;color: #808080;background-color: white;font-size: 10px;line-height: 150%;padding-top: 10px;padding-right: 10px;padding-bottom: 10px;padding-left: 10px;text-align: left;" mc:edit="footer_content01"><em>Copyright &copy; 2017 Citrix, All rights reserved. </em><br /></td></tr></tbody></table></td></tr></tbody></center></body></html>':null!=d.email.email_banner&&null==d.email.email_file?d.email.complete_email='<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width, initial-scale=1.0"><style type="text/css">@media screen {}@font-face {font-family: Netto;src: url("assets/lib/NettoOffcPro.woff") format("woff"), url("assets/lib/NettoOffcPro.ttf") format("truetype");}</style></head><body style= "width:70%; margin: auto; font-family:Netto"><center><tbody><tr><td align="center" valign="top" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;"></td></tr><br /><tr><td align="center" valign="top" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;"><table border="0" cellpadding="0" cellspacing="0" width="100%" id="templateHeader" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;background-color: #F4F4F4;border-top: 0px solid #FFFFFF;border-bottom: 1px solid #CCCCCC;border-collapse: collapse !important; font-family: Netto;"><tbody><tr><td></td> <td rowspan=2 valign="top" class="headerContent" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;color: #505050;font-size: 20px;font-weight: bold;line-height: 100%;padding-top: 0;padding-right: 0;padding-bottom: 0;padding-left: 0;text-align: left;vertical-align: middle;"><img src="'+p+'" style=" width: 100%;outline: none;text-decoration: none;line-height: 100%;border: 0;-ms-interpolation-mode: bicubic;height: auto;" id="headerImage" mc:label="header_image" mc:edit="header_image" mc:allowdesigner="" mc:allowtext=""></td></tr><tr> <td colspan=2><p class="banner-text" Style="color: white; font-size: 16px; padding-bottom: 10%; padding-right: 285px; margin-left: 10px; font-weight: bold;">'+d.email.email_banner_text+'</p></td> </tr></tbody></table></td></tr><tr><td align="center" valign="top" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;"><table border="0" cellpadding="0" cellspacing="0" width="100%" id="templateBody" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse !important;  font-family: Netto;"><tbody style="background-color: white"><tr><td valign="top" class="bodyContent" mc:edit="body_content00" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;color: #505050;background-color: white;font-size: 14px;line-height: 150%;padding-top: 10px;padding-right: 40px;padding-bottom: 10px;padding-left: 40px;text-align: left;"><span class="header3" style="display: block;font-size: small;font-style: normal;font-weight: normal;line-height: 100%;letter-spacing: normal;margin-right: 0;margin-bottom: 10px;margin-left: 0;text-align: left;color: #63666A !important;"><div><br>PROJECT_NAME</div><div><br></div>'+d.email.email_description+'</span></td></tr><tr><td valign="top" class="bodyContent" mc:edit="body_content01" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;color: #505050;background-color: white;font-size: 14px;line-height: 150%;padding-top: 10px;padding-right: 40px;padding-bottom: 10px;padding-left: 40px;text-align: left"><table border="0" cellspacing="0" cellpadding="0" class="mobile-button-container" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse !important;"><tbody><tr><td style="background-color:rgb(24, 121, 185); padding: 12px; border-radius: 25px"><a href="'+d.email.email_hyperlink+'" style="color: #ffffff">'+d.email.email_hyperlink_text+'</a></td></tr></tbody></table><table border="0" cellspacing="0" cellpadding="0" class="mobile-button-container" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse !important;"><tbody><tr><td><strong>NPS Qualtrics Survey Link:</strong></td></tr><br><tr><td style="background-color:rgb(24, 121, 185); text-align: center; padding: 12px; border-radius: 25px;"><a href=NPS_QUALTRICS_MAIL_SERVICW style="color: #ffffff">Take Survey</a></td></tr></tbody></table><br><table border="0" cellspacing="0" cellpadding="0" class="mobile-button-container" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse !important;"><tr><td valign="top" class="footerContent" style="padding-top: 10px;mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;color: #808080;background-color: white;font-size: 14px;line-height: 150%;padding-right: 10px;padding-bottom: 10px;text-align: left;font-family: Netto !important;" mc:edit="footer_content01">'+d.email.email_signature+'</td></tr></table></td></tr><tr><td align="center" style="padding-top: 5px;mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;" class="padding"></td></tr></tbody></table></td></tr><hr /><tr><td align="center" valign="top" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;"><table border="0" cellpadding="0" cellspacing="0" width="100%" id="templateFooter" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%; background-color: #ffffff;border-top: 1px solid #FFFFFF;border-collapse: collapse !important; font-family: Netto;"><tbody><tr><td valign="top" class="footerContent" mc:edit="footer_content00" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;color: #808080;background-color: white;font-size: 10px;line-height: 150%;padding-top: 10px;padding-right: 10px;padding-bottom: 10px;padding-left: 10px;text-align: left;"><a href="https://twitter.com/citrix" style="-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;color: #606060;font-weight: normal;text-decoration: underline;">Follow on Twitter</a>&nbsp;&nbsp;&nbsp;<a href="https://www.facebook.com/Citrix/" style="-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;color: #606060;font-weight: normal;text-decoration: underline;">Friend on Facebook</a>&nbsp;&nbsp;&nbsp;<a href="https://plus.google.com/+citrix" style="-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;color: #606060;font-weight: normal;text-decoration: underline;">Join Google Plus</a>&nbsp;</td></tr><tr><td valign="top" class="footerContent" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;color: #808080;background-color: white;font-size: 10px;line-height: 150%;padding-top: 10px;padding-right: 10px;padding-bottom: 10px;padding-left: 10px;text-align: left;" mc:edit="footer_content01"><em>Copyright &copy; 2017 Citrix, All rights reserved. </em><br /></td></tr></tbody></table></td></tr></tbody></center></body></html>':null==d.email.email_banner&&null!=d.email.email_file?d.email.complete_email='<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width, initial-scale=1.0"><style type="text/css">@media screen {}@font-face {font-family: Netto;src: url("assets/lib/NettoOffcPro.woff") format("woff"), url("assets/lib/NettoOffcPro.ttf") format("truetype");}</style></head><body style= "width:70%; margin: auto; font-family:Netto"><center><tbody><tr><td align="center" valign="top" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;"></td></tr><br /><tr><td align="center" valign="top" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;"></td></tr><tr><td align="center" valign="top" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;"><table border="0" cellpadding="0" cellspacing="0" width="100%" id="templateBody" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse !important; font-family: Netto;"><tbody style="background-color: white"><tr><td valign="top" class="bodyContent" mc:edit="body_content00" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;color: #505050;background-color: white;font-size: 14px;line-height: 150%;padding-top: 10px;padding-right: 40px;padding-bottom: 10px;padding-left: 40px;text-align: left;"><span class="header3" style="display: block;font-size: small;font-style: normal;font-weight: normal;line-height: 100%;letter-spacing: normal;margin-right: 0;margin-bottom: 10px;margin-left: 0;text-align: left;color: #63666A !important;"><div><br>PROJECT_NAME</div><div><br></div>'+d.email.email_description+'</span></td></tr><tr><td class="bodyContent" style="padding-top: 10px;padding-bottom: 10px;mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;color: #505050;background-color: white;font-size: 14px;line-height: 150%;padding-right: 40px;padding-left: 40px;text-align: left;"><img src="'+p+'" style="width:100%;outline: none;text-decoration: none;line-height: 100%;border: 0;-ms-interpolation-mode: bicubic;display: inline;height: auto;" id="bodyImage" mc:label="body_image" mc:edit="body_image" mc:allowtext=""></td></tr><tr><td valign="top" class="bodyContent" mc:edit="body_content01" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;color: #505050;background-color: white;font-size: 14px;line-height: 150%;padding-top: 10px;padding-right: 40px;padding-bottom: 10px;padding-left: 40px;text-align: left"><table border="0" cellspacing="0" cellpadding="0" class="mobile-button-container" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse !important;"><tbody><tr><td style="background-color:rgb(24, 121, 185); padding: 12px; border-radius: 25px"><a href="'+d.email.email_hyperlink+'" style="color: #ffffff">'+d.email.email_hyperlink_text+'</a></td></tr></tbody></table><table border="0" cellspacing="0" cellpadding="0" class="mobile-button-container" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse !important;"><tbody><tr><td><strong>NPS Qualtrics Survey Link:</strong></td></tr><br><tr><td style="background-color:rgb(24, 121, 185); text-align: center; padding: 12px; border-radius: 25px;"><a href=NPS_QUALTRICS_MAIL_SERVICW style="color: #ffffff">Take Survey</a></td></tr></tbody></table><br><table border="0" cellspacing="0" cellpadding="0" class="mobile-button-container" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse !important;"><tr><td valign="top" class="footerContent" style="padding-top: 10px;mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;color: #808080;background-color: white;font-size: 14px;line-height: 150%;padding-right: 10px;padding-bottom: 10px;text-align: left;font-family: Netto !important;" mc:edit="footer_content01">'+d.email.email_signature+'</td></tr></table></td></tr><tr><td align="center" style="padding-top: 5px;mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;" class="padding"></td></tr></tbody></table></td></tr><hr /><tr><td align="center" valign="top" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;"><table border="0" cellpadding="0" cellspacing="0" width="100%" id="templateFooter" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%; background-color: #ffffff;border-top: 1px solid #FFFFFF;border-collapse: collapse !important; font-family: Netto;"><tbody><tr><td valign="top" class="footerContent" mc:edit="footer_content00" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;color: #808080;background-color: white;font-size: 10px;line-height: 150%;padding-top: 10px;padding-right: 10px;padding-bottom: 10px;padding-left: 10px;text-align: left;"><a href="https://twitter.com/citrix" style="-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;color: #606060;font-weight: normal;text-decoration: underline;">Follow on Twitter</a>&nbsp;&nbsp;&nbsp;<a href="https://www.facebook.com/Citrix/" style="-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;color: #606060;font-weight: normal;text-decoration: underline;">Friend on Facebook</a>&nbsp;&nbsp;&nbsp;<a href="https://plus.google.com/+citrix" style="-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;color: #606060;font-weight: normal;text-decoration: underline;">Join Google Plus</a>&nbsp;</td></tr><tr><td valign="top" class="footerContent" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;color: #808080;background-color: white;font-size: 10px;line-height: 150%;padding-top: 10px;padding-right: 10px;padding-bottom: 10px;padding-left: 10px;text-align: left;" mc:edit="footer_content01"><em>Copyright &copy; 2017 Citrix, All rights reserved. </em><br /></td></tr></tbody></table></td></tr></tbody></center></body></html>':d.email.complete_email='<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width, initial-scale=1.0"><style type="text/css">@media screen {}@font-face {font-family: Netto;src: url("assets/lib/NettoOffcPro.woff") format("woff"), url("assets/lib/NettoOffcPro.ttf") format("truetype");}</style></head><body style= "width:70%; margin: auto; font-family:Netto"><center><tbody><tr><td align="center" valign="top" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;"></td></tr><br /><tr><td align="center" valign="top" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;"></td></tr><tr><td align="center" valign="top" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;"><table border="0" cellpadding="0" cellspacing="0" width="100%" id="templateBody" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse !important; font-family: Netto;"><tbody style="background-color: white"><tr><td valign="top" class="bodyContent" mc:edit="body_content00" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;color: #505050;background-color: white;font-size: 14px;line-height: 150%;padding-top: 10px;padding-right: 40px;padding-bottom: 10px;padding-left: 40px;text-align: left;"><span class="header3" style="display: block;font-size: small;font-style: normal;font-weight: normal;line-height: 100%;letter-spacing: normal;margin-right: 0;margin-bottom: 10px;margin-left: 0;text-align: left;color: #63666A !important;"><div><br>PROJECT_NAME</div><div><br></div>'+d.email.email_description+'</span></td></tr><tr><td valign="top" class="bodyContent" mc:edit="body_content01" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;color: #505050;background-color: white;font-size: 14px;line-height: 150%;padding-top: 10px;padding-right: 40px;padding-bottom: 10px;padding-left: 40px;text-align: left"><table border="0" cellspacing="0" cellpadding="0" class="mobile-button-container" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse !important;"><tbody><tr><td style="background-color:rgb(24, 121, 185); padding: 12px; border-radius: 25px"><a href="'+d.email.email_hyperlink+'" style="color: #ffffff">'+d.email.email_hyperlink_text+'</a></td></tr></tbody></table><table border="0" cellspacing="0" cellpadding="0" class="mobile-button-container" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse !important;"><tbody><tr><td><strong>NPS Qualtrics Survey Link:</strong></td></tr><br><tr><td style="background-color:rgb(24, 121, 185); text-align: center; padding: 12px; border-radius: 25px;"><a href=NPS_QUALTRICS_MAIL_SERVICW style="color: #ffffff">Take Survey</a></td></tr></tbody></table><br><table border="0" cellspacing="0" cellpadding="0" class="mobile-button-container" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse !important;"><tr><td valign="top" class="footerContent" style="padding-top: 10px;mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;color: #808080;background-color: white;font-size: 14px;line-height: 150%;padding-right: 10px;padding-bottom: 10px;text-align: left;font-family: Netto !important;" mc:edit="footer_content01">'+d.email.email_signature+'</td></tr></table></td></tr><tr><td align="center" style="padding-top: 5px;mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;" class="padding"></td></tr></tbody></table></td></tr><hr /><tr><td align="center" valign="top" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;"><table border="0" cellpadding="0" cellspacing="0" width="100%" id="templateFooter" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%; background-color: #ffffff;border-top: 1px solid #FFFFFF;border-collapse: collapse !important; font-family: Netto;"><tbody><tr><td valign="top" class="footerContent" mc:edit="footer_content00" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;color: #808080;background-color: white;font-size: 10px;line-height: 150%;padding-top: 10px;padding-right: 10px;padding-bottom: 10px;padding-left: 10px;text-align: left;"><a href="https://twitter.com/citrix" style="-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;color: #606060;font-weight: normal;text-decoration: underline;">Follow on Twitter</a>&nbsp;&nbsp;&nbsp;<a href="https://www.facebook.com/Citrix/" style="-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;color: #606060;font-weight: normal;text-decoration: underline;">Friend on Facebook</a>&nbsp;&nbsp;&nbsp;<a href="https://plus.google.com/+citrix" style="-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;color: #606060;font-weight: normal;text-decoration: underline;">Join Google Plus</a>&nbsp;</td></tr><tr><td valign="top" class="footerContent" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;color: #808080;background-color: white;font-size: 10px;line-height: 150%;padding-top: 10px;padding-right: 10px;padding-bottom: 10px;padding-left: 10px;text-align: left;" mc:edit="footer_content01"><em>Copyright &copy; 2017 Citrix, All rights reserved. </em><br /></td></tr></tbody></table></td></tr></tbody></center></body></html>',null!=d.email.email_hyperlink&&0!=d.email.email_hyperlink.length||(d.email.complete_email=d.email.complete_email.replace('<tbody><tr><td style="background-color:rgb(24, 121, 185); padding: 12px; border-radius: 25px"><a href="'+d.email.email_hyperlink+'" style="color: #ffffff">'+d.email.email_hyperlink_text+"</a></td></tr></tbody>","")),a.createEmailTemplate(d.email).then(function(t){"Success"==t.data.status&&(swal("Success","Email Created / Updated Successfully","success"),e.go("admin.category"))},function(e){})},d.previewEmailTemplate=function(e){var t=angular.element(n[0].querySelector("body"));s.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"previewEmail.html",resolve:{emailContent:function(){return e}},controller:["$scope","emailContent",function(e,t){null==d.email.email_banner_text&&(d.email.email_banner_text=" ");var r;r=null!=d.email.email_banner&&null!=d.email.email_file?'<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width, initial-scale=1.0"><style type="text/css">@media screen {}@font-face {font-family: Netto;src: url("assets/lib/NettoOffcPro.woff") format("woff"), url("assets/lib/NettoOffcPro.ttf") format("truetype");}</style></head><body style= "width:70%; margin: auto; font-family:Netto"><center><tbody><tr><td align="center" valign="top" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;"></td></tr><br /><tr><td align="center" valign="top" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;"><table border="0" cellpadding="0" cellspacing="0" width="100%" id="templateHeader" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;background-color: #F4F4F4;border-top: 0px solid #FFFFFF;border-bottom: 1px solid #CCCCCC;border-collapse: collapse !important; font-family: Netto;"><tbody><tr><td></td> <td rowspan=2 valign="top" class="headerContent" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;color: #505050;font-size: 20px;font-weight: bold;line-height: 100%;padding-top: 0;padding-right: 0;padding-bottom: 0;padding-left: 0;text-align: left;vertical-align: middle;"><img src="'+p+'" style=" width: 100%;outline: none;text-decoration: none;line-height: 100%;border: 0;-ms-interpolation-mode: bicubic;height: auto;" id="headerImage" mc:label="header_image" mc:edit="header_image" mc:allowdesigner="" mc:allowtext=""></td></tr><tr> <td colspan=2><p class="banner-text" Style="word-break: break-all; color: white; font-size: 16px; padding-bottom: 10%; padding-right: 285px; margin-left: 10px; font-weight: bold;">'+d.email.email_banner_text+'</p></td> </tr></tbody></table></td></tr><tr><td align="center" valign="top" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;"><table border="0" cellpadding="0" cellspacing="0" width="100%" id="templateBody" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse !important; font-family: Netto;"><tbody style="background-color: white"><tr><td valign="top" class="bodyContent" mc:edit="body_content00" style="word-break: break-all; mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;color: #505050;background-color: white;font-size: 14px;line-height: 150%;padding-top: 10px;padding-right: 40px;padding-bottom: 10px;padding-left: 40px;text-align: left;"><span class="header3" style="display: block;font-size: small;font-style: normal;font-weight: normal;line-height: 100%;letter-spacing: normal;margin-right: 0;margin-bottom: 10px;margin-left: 0;text-align: left;color: #63666A !important; word-break: break-word;"><div><br>PROJECT_NAME</div><div><br></div>'+d.email.email_description+'</span></td></tr><tr><td class="bodyContent" style="padding-top: 10px;padding-bottom: 10px;mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;color: #505050;background-color: white;font-size: 14px;line-height: 150%;padding-right: 40px;padding-left: 40px;text-align: left;"><img src="'+p+'" style="width:100%;outline: none;text-decoration: none;line-height: 100%;border: 0;-ms-interpolation-mode: bicubic;display: inline;height: auto;" id="bodyImage" mc:label="body_image" mc:edit="body_image" mc:allowtext=""></td></tr><tr><td valign="top" class="bodyContent" mc:edit="body_content01" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;color: #505050;background-color: white;font-size: 14px;line-height: 150%;padding-top: 10px;padding-right: 40px;padding-bottom: 10px;padding-left: 40px;text-align: left"><table border="0" cellspacing="0" cellpadding="0" class="mobile-button-container" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse !important;"><tbody><tr><td style="background-color:rgb(24, 121, 185); padding: 12px; border-radius: 25px"><a href="'+d.email.email_hyperlink+'" style="color: #ffffff">'+d.email.email_hyperlink_text+'</a></td></tr></tbody></table><table border="0" cellspacing="0" cellpadding="0" class="mobile-button-container" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse !important;"><tbody><tr><td><strong>NPS Qualtrics Survey Link:</strong></td></tr><br><tr><td style="background-color:rgb(24, 121, 185); text-align: center; padding: 12px; border-radius: 25px;"><a href=NPS_QUALTRICS_MAIL_SERVICW style="color: #ffffff">Take Survey</a></td></tr></tbody></table><br><table border="0" cellspacing="0" cellpadding="0" class="mobile-button-container" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse !important;"><tr><td valign="top" class="footerContent" style="word-break: break-all; padding-top: 10px;mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;color: #808080;background-color: white;font-size: 14px;line-height: 150%;padding-right: 10px;padding-bottom: 10px;text-align: left;font-family: Netto !important; word-break: break-word;" mc:edit="footer_content01">'+d.email.email_signature+'</td></tr></table></td></tr><tr><td align="center" style="padding-top: 5px;mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;" class="padding"></td></tr></tbody></table></td></tr><hr /><tr><td align="center" valign="top" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;"><table border="0" cellpadding="0" cellspacing="0" width="100%" id="templateFooter" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%; background-color: #ffffff;border-top: 1px solid #FFFFFF;border-collapse: collapse !important; font-family: Netto;"><tbody><tr><td valign="top" class="footerContent" mc:edit="footer_content00" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;color: #808080;background-color: white;font-size: 10px;line-height: 150%;padding-top: 10px;padding-right: 10px;padding-bottom: 10px;padding-left: 10px;text-align: left;"><a href="https://twitter.com/citrix" style="-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;color: #606060;font-weight: normal;text-decoration: underline;">Follow on Twitter</a>&nbsp;&nbsp;&nbsp;<a href="https://www.facebook.com/Citrix/" style="-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;color: #606060;font-weight: normal;text-decoration: underline;">Friend on Facebook</a>&nbsp;&nbsp;&nbsp;<a href="https://plus.google.com/+citrix" style="-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;color: #606060;font-weight: normal;text-decoration: underline;">Join Google Plus</a>&nbsp;</td></tr><tr><td valign="top" class="footerContent" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;color: #808080;background-color: white;font-size: 10px;line-height: 150%;padding-top: 10px;padding-right: 10px;padding-bottom: 10px;padding-left: 10px;text-align: left;" mc:edit="footer_content01"><em>Copyright &copy; 2017 Citrix, All rights reserved. </em><br /></td></tr></tbody></table></td></tr></tbody></center></body></html>':null!=d.email.email_banner&&null==d.email.email_file?'<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width, initial-scale=1.0"><style type="text/css">@media screen {}@font-face {font-family: Netto;src: url("assets/lib/NettoOffcPro.woff") format("woff"), url("assets/lib/NettoOffcPro.ttf") format("truetype");}</style></head><body style= "width:70%; margin: auto; font-family:Netto"><center><tbody><tr><td align="center" valign="top" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;"></td></tr><br /><tr><td align="center" valign="top" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;"><table border="0" cellpadding="0" cellspacing="0" width="100%" id="templateHeader" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;background-color: #F4F4F4;border-top: 0px solid #FFFFFF;border-bottom: 1px solid #CCCCCC;border-collapse: collapse !important; font-family: Netto;"><tbody><tr><td></td> <td rowspan=2 valign="top" class="headerContent" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;color: #505050;font-size: 20px;font-weight: bold;line-height: 100%;padding-top: 0;padding-right: 0;padding-bottom: 0;padding-left: 0;text-align: left;vertical-align: middle;"><img src="'+p+'" style=" width: 100%;outline: none;text-decoration: none;line-height: 100%;border: 0;-ms-interpolation-mode: bicubic;height: auto;" id="headerImage" mc:label="header_image" mc:edit="header_image" mc:allowdesigner="" mc:allowtext=""></td></tr><tr> <td colspan=2><p class="banner-text" Style="word-break: break-all; color: white; font-size: 16px; padding-bottom: 10%; padding-right: 285px; margin-left: 10px; font-weight: bold;">'+d.email.email_banner_text+'</p></td> </tr></tbody></table></td></tr><tr><td align="center" valign="top" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;"><table border="0" cellpadding="0" cellspacing="0" width="100%" id="templateBody" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse !important; font-family: Netto;"><tbody style="background-color: white"><tr><td valign="top" class="bodyContent" mc:edit="body_content00" style="word-break: break-all; mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;color: #505050;background-color: white;font-size: 14px;line-height: 150%;padding-top: 10px;padding-right: 40px;padding-bottom: 10px;padding-left: 40px;text-align: left;"><span class="header3" style="display: block;font-size: small;font-style: normal;font-weight: normal;line-height: 100%;letter-spacing: normal;margin-right: 0;margin-bottom: 10px;margin-left: 0;text-align: left;color: #63666A !important; word-break: break-word;"><div><br>PROJECT_NAME</div><div><br></div>'+d.email.email_description+'</span></td></tr><tr><td valign="top" class="bodyContent" mc:edit="body_content01" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;color: #505050;background-color: white;font-size: 14px;line-height: 150%;padding-top: 10px;padding-right: 40px;padding-bottom: 10px;padding-left: 40px;text-align: left"><table border="0" cellspacing="0" cellpadding="0" class="mobile-button-container" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse !important;"><tbody><tr><td style="background-color:rgb(24, 121, 185); padding: 12px; border-radius: 25px"><a href="'+d.email.email_hyperlink+'" style="color: #ffffff">'+d.email.email_hyperlink_text+'</a></td></tr></tbody></table><table border="0" cellspacing="0" cellpadding="0" class="mobile-button-container" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse !important;"><tbody><tr><td><strong>NPS Qualtrics Survey Link:</strong></td></tr><br><tr><td style="background-color:rgb(24, 121, 185); text-align: center; padding: 12px; border-radius: 25px;"><a href=NPS_QUALTRICS_MAIL_SERVICW style="color: #ffffff">Take Survey</a></td></tr></tbody></table><br><table border="0" cellspacing="0" cellpadding="0" class="mobile-button-container" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse !important;"><tr><td valign="top" class="footerContent" style="word-break: break-all; padding-top: 10px;mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;color: #808080;background-color: white;font-size: 14px;line-height: 150%;padding-right: 10px;padding-bottom: 10px;text-align: left;font-family: Netto !important; word-break: break-word;" mc:edit="footer_content01">'+d.email.email_signature+'</td></tr></table></td></tr><tr><td align="center" style="padding-top: 5px;mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;" class="padding"></td></tr></tbody></table></td></tr><hr /><tr><td align="center" valign="top" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;"><table border="0" cellpadding="0" cellspacing="0" width="100%" id="templateFooter" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%; background-color: #ffffff;border-top: 1px solid #FFFFFF;border-collapse: collapse !important; font-family: Netto;"><tbody><tr><td valign="top" class="footerContent" mc:edit="footer_content00" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;color: #808080;background-color: white;font-size: 10px;line-height: 150%;padding-top: 10px;padding-right: 10px;padding-bottom: 10px;padding-left: 10px;text-align: left;"><a href="https://twitter.com/citrix" style="-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;color: #606060;font-weight: normal;text-decoration: underline;">Follow on Twitter</a>&nbsp;&nbsp;&nbsp;<a href="https://www.facebook.com/Citrix/" style="-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;color: #606060;font-weight: normal;text-decoration: underline;">Friend on Facebook</a>&nbsp;&nbsp;&nbsp;<a href="https://plus.google.com/+citrix" style="-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;color: #606060;font-weight: normal;text-decoration: underline;">Join Google Plus</a>&nbsp;</td></tr><tr><td valign="top" class="footerContent" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;color: #808080;background-color: white;font-size: 10px;line-height: 150%;padding-top: 10px;padding-right: 10px;padding-bottom: 10px;padding-left: 10px;text-align: left;" mc:edit="footer_content01"><em>Copyright &copy; 2017 Citrix, All rights reserved. </em><br /></td></tr></tbody></table></td></tr></tbody></center></body></html>':null==d.email.email_banner&&null!=d.email.email_file?'<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width, initial-scale=1.0"><style type="text/css">@media screen {}@font-face {font-family: Netto;src: url("assets/lib/NettoOffcPro.woff") format("woff"), url("assets/lib/NettoOffcPro.ttf") format("truetype");}</style></head><body style= "width:70%; margin: auto; font-family:Netto"><center><tbody><tr><td align="center" valign="top" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;"></td></tr><br /><tr><td align="center" valign="top" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;"></td></tr><tr><td align="center" valign="top" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;"><table border="0" cellpadding="0" cellspacing="0" width="100%" id="templateBody" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse !important; font-family: Netto;"><tbody style="background-color: white"><tr><td valign="top" class="bodyContent" mc:edit="body_content00" style="word-break: break-all; mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;color: #505050;background-color: white;font-size: 14px;line-height: 150%;padding-top: 10px;padding-right: 40px;padding-bottom: 10px;padding-left: 40px;text-align: left;"><span class="header3" style="display: block;font-size: small;font-style: normal;font-weight: normal;line-height: 100%;letter-spacing: normal;margin-right: 0;margin-bottom: 10px;margin-left: 0;text-align: left;color: #63666A !important;  word-break: break-word;"><div><br>PROJECT_NAME</div><div><br></div>'+d.email.email_description+'</span></td></tr><tr><td class="bodyContent" style="padding-top: 10px;padding-bottom: 10px;mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;color: #505050;background-color: white;font-size: 14px;line-height: 150%;padding-right: 40px;padding-left: 40px;text-align: left;"><img src="'+p+'" style="width:100%;outline: none;text-decoration: none;line-height: 100%;border: 0;-ms-interpolation-mode: bicubic;display: inline;height: auto;" id="bodyImage" mc:label="body_image" mc:edit="body_image" mc:allowtext=""></td></tr><tr><td valign="top" class="bodyContent" mc:edit="body_content01" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;color: #505050;background-color: white;font-size: 14px;line-height: 150%;padding-top: 10px;padding-right: 40px;padding-bottom: 10px;padding-left: 40px;text-align: left"><table border="0" cellspacing="0" cellpadding="0" class="mobile-button-container" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse !important;"><tbody><tr><td style="background-color:rgb(24, 121, 185); padding: 12px; border-radius: 25px"><a href="'+d.email.email_hyperlink+'" style="color: #ffffff">'+d.email.email_hyperlink_text+'</a></td></tr></tbody></table><table border="0" cellspacing="0" cellpadding="0" class="mobile-button-container" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse !important;"><tbody><tr><td><strong>NPS Qualtrics Survey Link:</strong></td></tr><br><tr><td style="background-color:rgb(24, 121, 185); text-align: center; padding: 12px; border-radius: 25px;"><a href=NPS_QUALTRICS_MAIL_SERVICW style="color: #ffffff">Take Survey</a></td></tr></tbody></table><br><table border="0" cellspacing="0" cellpadding="0" class="mobile-button-container" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse !important;"><tr><td valign="top" class="footerContent" style="word-break: break-all; padding-top: 10px;mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;color: #808080;background-color: white;font-size: 14px;line-height: 150%;padding-right: 10px;padding-bottom: 10px;text-align: left;font-family: Netto !important; word-break: break-word;" mc:edit="footer_content01">'+d.email.email_signature+'</td></tr></table></td></tr><tr><td align="center" style="padding-top: 5px;mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;" class="padding"></td></tr></tbody></table></td></tr><hr /><tr><td align="center" valign="top" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;"><table border="0" cellpadding="0" cellspacing="0" width="100%" id="templateFooter" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%; background-color: #ffffff;border-top: 1px solid #FFFFFF;border-collapse: collapse !important; font-family: Netto;"><tbody><tr><td valign="top" class="footerContent" mc:edit="footer_content00" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;color: #808080;background-color: white;font-size: 10px;line-height: 150%;padding-top: 10px;padding-right: 10px;padding-bottom: 10px;padding-left: 10px;text-align: left;"><a href="https://twitter.com/citrix" style="-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;color: #606060;font-weight: normal;text-decoration: underline;">Follow on Twitter</a>&nbsp;&nbsp;&nbsp;<a href="https://www.facebook.com/Citrix/" style="-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;color: #606060;font-weight: normal;text-decoration: underline;">Friend on Facebook</a>&nbsp;&nbsp;&nbsp;<a href="https://plus.google.com/+citrix" style="-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;color: #606060;font-weight: normal;text-decoration: underline;">Join Google Plus</a>&nbsp;</td></tr><tr><td valign="top" class="footerContent" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;color: #808080;background-color: white;font-size: 10px;line-height: 150%;padding-top: 10px;padding-right: 10px;padding-bottom: 10px;padding-left: 10px;text-align: left;" mc:edit="footer_content01"><em>Copyright &copy; 2017 Citrix, All rights reserved. </em><br /></td></tr></tbody></table></td></tr></tbody></center></body></html>':'<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width, initial-scale=1.0"><style type="text/css">@media screen {}@font-face {font-family: Netto;src: url("assets/lib/NettoOffcPro.woff") format("woff"), url("assets/lib/NettoOffcPro.ttf") format("truetype");}</style></head><body style= "width:70%; margin: auto; font-family:Netto"><center><tbody><tr><td align="center" valign="top" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;"></td></tr><br /><tr><td align="center" valign="top" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;"></td></tr><tr><td align="center" valign="top" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;"><table border="0" cellpadding="0" cellspacing="0" width="100%" id="templateBody" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse !important; font-family: Netto;"><tbody style="background-color: white"><tr><td valign="top" class="bodyContent" mc:edit="body_content00" style="word-break: break-all; mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;color: #505050;background-color: white;font-size: 14px;line-height: 150%;padding-top: 10px;padding-right: 40px;padding-bottom: 10px;padding-left: 40px;text-align: left;"><span class="header3" style="display: block;font-size: small;font-style: normal;font-weight: normal;line-height: 100%;letter-spacing: normal;margin-right: 0;margin-bottom: 10px;margin-left: 0;text-align: left;color: #63666A !important;  word-break: break-word;"><div><br>PROJECT_NAME</div><div><br></div>'+d.email.email_description+'</span></td></tr><tr><td valign="top" class="bodyContent" mc:edit="body_content01" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;color: #505050;background-color: white;font-size: 14px;line-height: 150%;padding-top: 10px;padding-right: 40px;padding-bottom: 10px;padding-left: 40px;text-align: left"><table border="0" cellspacing="0" cellpadding="0" class="mobile-button-container" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse !important;"><tbody><tr><td style="background-color:rgb(24, 121, 185); padding: 12px; border-radius: 25px"><a href="'+d.email.email_hyperlink+'" style="color: #ffffff">'+d.email.email_hyperlink_text+'</a></td></tr></tbody></table><table border="0" cellspacing="0" cellpadding="0" class="mobile-button-container" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse !important;"><tbody><tr><td><strong>NPS Qualtrics Survey Link:</strong></td></tr><br><tr><td style="background-color:rgb(24, 121, 185); text-align: center; padding: 12px; border-radius: 25px;"><a href=NPS_QUALTRICS_MAIL_SERVICW style="color: #ffffff">Take Survey</a></td></tr></tbody></table><br><table border="0" cellspacing="0" cellpadding="0" class="mobile-button-container" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse !important;"><tr><td valign="top" class="footerContent" style="word-break: break-all; padding-top: 10px;mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;color: #808080;background-color: white;font-size: 14px;line-height: 150%;padding-right: 10px;padding-bottom: 10px;text-align: left;font-family: Netto !important; word-break: break-word;" mc:edit="footer_content01">'+d.email.email_signature+'</td></tr></table></td></tr><tr><td align="center" style="padding-top: 5px;mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;" class="padding"></td></tr></tbody></table></td></tr><hr /><tr><td align="center" valign="top" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;"><table border="0" cellpadding="0" cellspacing="0" width="100%" id="templateFooter" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%; background-color: #ffffff;border-top: 1px solid #FFFFFF;border-collapse: collapse !important; font-family: Netto;"><tbody><tr><td valign="top" class="footerContent" mc:edit="footer_content00" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;color: #808080;background-color: white;font-size: 10px;line-height: 150%;padding-top: 10px;padding-right: 10px;padding-bottom: 10px;padding-left: 10px;text-align: left;"><a href="https://twitter.com/citrix" style="-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;color: #606060;font-weight: normal;text-decoration: underline;">Follow on Twitter</a>&nbsp;&nbsp;&nbsp;<a href="https://www.facebook.com/Citrix/" style="-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;color: #606060;font-weight: normal;text-decoration: underline;">Friend on Facebook</a>&nbsp;&nbsp;&nbsp;<a href="https://plus.google.com/+citrix" style="-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;color: #606060;font-weight: normal;text-decoration: underline;">Join Google Plus</a>&nbsp;</td></tr><tr><td valign="top" class="footerContent" style="mso-table-lspace: 0pt;mso-table-rspace: 0pt;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;border-collapse: collapse;color: #808080;background-color: white;font-size: 10px;line-height: 150%;padding-top: 10px;padding-right: 10px;padding-bottom: 10px;padding-left: 10px;text-align: left;" mc:edit="footer_content01"><em>Copyright &copy; 2017 Citrix, All rights reserved. </em><br /></td></tr></tbody></table></td></tr></tbody></center></body></html>',"email_for_proj_purchase"==d.email.email_type||"email_for_proj_25_left"==d.email.email_type||"email_for_distributor"==d.email.email_type?null==d.email.email_hyperlink||0==d.email.email_hyperlink.length?t.completeEmail=o.trustAsHtml(r.replace('<tbody><tr><td><strong>NPS Qualtrics Survey Link:</strong></td></tr><br><tr><td style="background-color:rgb(24, 121, 185); text-align: center; padding: 12px; border-radius: 25px;"><a href=NPS_QUALTRICS_MAIL_SERVICW style="color: #ffffff">Take Survey</a></td></tr></tbody>',"").replace('<tbody><tr><td style="background-color:rgb(24, 121, 185); padding: 12px; border-radius: 25px"><a href="'+d.email.email_hyperlink+'" style="color: #ffffff">'+d.email.email_hyperlink_text+"</a></td></tr></tbody>","").replace("<div><br>PROJECT_NAME</div>","")):t.completeEmail=o.trustAsHtml(r.replace('<tbody><tr><td><strong>NPS Qualtrics Survey Link:</strong></td></tr><br><tr><td style="background-color:rgb(24, 121, 185); text-align: center; padding: 12px; border-radius: 25px;"><a href=NPS_QUALTRICS_MAIL_SERVICW style="color: #ffffff">Take Survey</a></td></tr></tbody>',"").replace("<div><br>PROJECT_NAME</div>","")):null==d.email.email_hyperlink||0==d.email.email_hyperlink.length?t.completeEmail=o.trustAsHtml(r.replace('<tbody><tr><td style="background-color:rgb(24, 121, 185); padding: 12px; border-radius: 25px"><a href="'+d.email.email_hyperlink+'" style="color: #ffffff">'+d.email.email_hyperlink_text+"</a></td></tr></tbody>","").replace("<div><br>PROJECT_NAME</div>","")):t.completeEmail=o.trustAsHtml(r.replace("<div><br>PROJECT_NAME</div>","")),e.emailContent=t}],appendTo:t})},d.uploadFile=function(e,t){if(void 0!=e){var r;0==t?(d.email.email_banner_msg=!0,d.email.email_banner="img-banner-"+Date.now()+"."+e.name.split(".")[e.name.split(".").length-1],r=d.email.email_banner):1==t&&(d.email.email_file_msg=!0,d.email.email_file="img-file-"+Date.now()+"."+e.name.split(".")[e.name.split(".").length-1],r=d.email.email_file),i.upload({url:c.value+"/file/upload",data:{file:e,name:r}}).then(function(r){0==t?d.filePreview=e:1==t&&(d.contentPreview=e)},function(e){},function(e){})}else null==e&&(0==t?angular.element("#banner_img").val(null):1==t&&angular.element("#content_img").val(null),swal("Try Again!","You have added wrong image format"))},d.deleteBannerImage=function(e){a.deleteBannerImage(e,d.email.email_banner).then(function(e){"Success"==e.data.status&&(d.email.email_banner_text=" ",d.file=null,d.filePreview=null,d.email.email_banner=null,d.email.email_banner_msg=!0)},function(e){})},d.deleteContentImage=function(e){a.deleteContentImage(e,d.email.email_file).then(function(e){"Success"==e.data.status&&(d.content=null,d.contentPreview=null,d.email.email_file=null,d.email.email_file_msg=!0)},function(e){})}}]),angular.module("CitrixApp").controller("AllDistributorsController",["$state","$rootScope","AllDistributorsService","localStorageService",function(e,t,r,a){var o=this;t.showSpinner=!0,r.getAllDistributors().then(function(e){"No records found."!=e.message?(o.distributors=e,t.showSpinner=!1):(t.showSpinner=!1,o.distributors=[])},function(e){t.showSpinner=!1}),o.removeDistributor=function(e){r.removeDistributor(e).then(function(t){for(var r=-1,a=0;a<o.distributors.length;a++)o.distributors[a].id==e&&(r=a);r>-1&&o.distributors.splice(r,1)},function(e){console.log("some error occur")})},o.addNewDistributor=function(){e.go("admin.addDistributor")},o.editDistributor=function(t){var r;if(0!=o.distributors.length)for(var n=0;n<o.distributors.length;n++)o.distributors[n].id===t&&(r=o.distributors[n],a.set("selectedDistributor",r));e.go("admin.editDistributor")}}]),angular.module("CitrixApp").controller("AddDistributorController",["$state","AddDistributorService",function(e,t){var r=this;r.addDistributor=function(){t.addDistributor(r.distributor).then(function(t){e.go("admin.distributor")},function(e){})},r.countryList=t.getCountriesList()}]),angular.module("CitrixApp").controller("EditDistributorController",["$scope","$state","EditDistributorService","localStorageService","AddDistributorService",function(e,t,r,a,o){var n=this;n.distributor=a.get("selectedDistributor"),n.updateDistributor=function(){r.updateDistributorDetails(n.distributor).then(function(e){n.distributor=e,t.go("admin.distributor")},function(e){})},n.countryList=o.getCountriesList()}]),angular.module("CitrixApp").controller("PartnersSurveyController",["$scope","$state","$stateParams","localStorageService","$timeout","$rootScope","PartnersSurveySurvice",function(e,t,r,a,o,n,s){var i=this;i.response=null,i.survey={},i.survey.project_name="",i.survey.company_name="",i.survey.start_date="",i.survey.end_date="",i.survey.quarter_name="",i.survey.unanswered="",i.npsCompanyNameList=[{name:"All",email:""}],i.npsProjectNameList=[{name:"All",id:""}],i.survey_taken=5,i.survey_send=5,i.survey_per=0,angular.element(".bar").css("width",i.survey_per+"%");var l=function(e,t,r,a,o){i.data=[],n.showSpinner=!0,s.getPartnerSurveyResponse(e,t,r,a,o).then(function(e){n.showSpinner=!1;var t=[];if(i.averageResponse=e.avg_nps_response,null!=i.averageResponse&&(i.averageResponse.avgSatisfactionDriver=m(i.averageResponse.avg_quality_of_deliver,i.averageResponse.avg_on_time_completion,i.averageResponse.avg_meeting_bus_objectives,i.averageResponse.avg_overall_eng_value),null!==i.averageResponse.nps_percentage?d(parseFloat(i.averageResponse.nps_percentage)):d(0),i.averageResponse.npsMonthlyTrend=p(u(i.averageResponse.nps_monthly_trends_map)),null==i.averageResponse.survey_response_rate?(i.averageResponse.survey_response_rate=0,angular.element(".bar").css("width",i.survey_per+"%")):angular.element(".bar").css("width",i.averageResponse.survey_response_rate+"%")),i.response=e.user_response_bo,null!=i.response)for(var r=0;r<i.response.length;r++){var a=i.response[r].company_name,o=i.response[r].email,s=i.response[r].partnersProjectResponseBOs;if(null!=s)for(var l=0;l<s.length;l++){var g=s[l];if(null!=g&&null!=g.nps_survey_results)for(var f=0;f<g.nps_survey_results.length;f++){var h=c(g.nps_survey_results[f].q1),b=m(g.nps_survey_results[f].q4_1,g.nps_survey_results[f].q4_2,g.nps_survey_results[f].q4_3,g.nps_survey_results[f].q4_4),y=c(g.nps_survey_results[f].q5),_=new Date(g.nps_survey_results[f].creation_time);g.nps_survey_results[f].creation_time=new Date(_.getUTCFullYear(),_.getUTCMonth(),_.getUTCDate(),_.getUTCHours(),_.getUTCMinutes(),_.getUTCSeconds()),_=new Date(g.nps_survey_results[f].end_date),g.nps_survey_results[f].end_date=new Date(_.getUTCFullYear(),_.getUTCMonth(),_.getUTCDate(),_.getUTCHours(),_.getUTCMinutes(),_.getUTCSeconds()),t.push({nps_survey:g.nps_survey_results[f],partner_name:g.nps_survey_results[f].partner_name,project_name:g.project_name,customer_name:g.customer_name,start_date:g.start_date,end_date:g.end_date,recommendCCSGuageGraph:h,satisfactionDriverPerProject:b,citrixInNext12Month:y});for(var v=!0,x=0;x<i.npsProjectNameList.length;x++)i.npsProjectNameList[x].name==g.project_name&&(v=!1);v&&i.npsProjectNameList.push({name:g.project_name,id:g.id})}}if(null!=t&&t.length>0){i.data.push({company_name:a,data:t});var C=!0;for(x=0;x<i.npsCompanyNameList.length;x++)i.npsCompanyNameList[x].name==a&&(C=!1);C&&i.npsCompanyNameList.push({name:a,email:o}),t=[]}}},function(e){})};l(i.survey.company_name,i.survey.start_date,i.survey.end_date,i.survey.project_name,i.survey.unanswered),e.today=function(){e.startDate=new Date,e.endDate=new Date},e.today(),e.inlineOptions={minDate:new Date,showWeeks:!0},e.dateOptions={formatYear:"yy",maxDate:new Date(2020,12,31),minDate:new Date(2e3,1,1),startingDay:1},e.dateOptionsEnd={formatYear:"yy",maxDate:new Date(2020,12,31),minDate:new Date(2e3,1,1),startingDay:1},e.formats=["MMM dd yyyy"],e.format=e.formats[0],e.popup1={opened:!1},e.popup2={opened:!1},e.open1=function(){e.popup1.opened=!0},e.open2=function(){e.popup2.opened=!0},e.$watch("PSController.survey.start_date",function(t){e.dateOptionsEnd.minDate=new Date(t),e.dateOptionsEnd.maxDate=new Date(new Date(t).setMonth(new Date(t).getMonth()+6))}),e.$watch("PSController.survey.end_date",function(t){e.dateOptions.maxDate=new Date(t),e.dateOptions.minDate=new Date(new Date(t).setMonth(new Date(t).getMonth()-6))});!function(){i.quarterList=[];var e=2017;if(e<(new Date).getFullYear())for(var t=e;t<(new Date).getFullYear();t++){for(var r=1;r<5;r++)i.quarterList.push(t+" Q"+r);t==(new Date).getFullYear()-1&&(e=(new Date).getFullYear())}e==(new Date).getFullYear()&&((new Date).getMonth()>=0&&i.quarterList.push(e+" Q1"),(new Date).getMonth()>=3&&i.quarterList.push(e+" Q2"),(new Date).getMonth()>=5&&i.quarterList.push(e+" Q3"),(new Date).getMonth()>=8&&i.quarterList.push(e+" Q4"))}(),i.selectQuarter=function(){var e,t,r=i.survey.quarter_name.slice(0,4);"Q1"==i.survey.quarter_name.slice(5)?(e=new Date(r+"-01-01"),t=new Date(r+"-03-31"),i.survey.start_date=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()),i.survey.end_date=new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds())):"Q2"==i.survey.quarter_name.slice(5)?(e=new Date(r+"-04-01"),t=new Date(r+"-06-30"),i.survey.start_date=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()),i.survey.end_date=new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds())):"Q3"==i.survey.quarter_name.slice(5)?(e=new Date(r+"-07-01"),t=new Date(r+"-09-30"),i.survey.start_date=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()),i.survey.end_date=new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds())):"Q4"==i.survey.quarter_name.slice(5)&&(e=new Date(r+"-10-01"),t=new Date(r+"-12-31"),i.survey.start_date=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()),i.survey.end_date=new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds()))},i.clearAllFilters=function(){i.survey.hasOwnProperty("project_name")&&(i.survey.project_name=""),i.survey.hasOwnProperty("start_date")&&(i.survey.start_date=""),i.survey.hasOwnProperty("end_date")&&(i.survey.end_date=""),i.survey.hasOwnProperty("quarter_name")&&(i.survey.quarter_name=""),i.survey.hasOwnProperty("unanswered")&&(i.survey.unanswered=""),i.survey.hasOwnProperty("company_name")&&(i.survey.company_name=""),l(i.survey.company_name,i.survey.start_date,i.survey.end_date,i.survey.project_name,i.survey.unanswered)},i.filter=function(){var e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],t=angular.copy(i.survey.start_date),r=angular.copy(i.survey.end_date);if(void 0==i.survey.start_date&&(i.survey.start_date=""),void 0==i.survey.end_date&&(i.survey.end_date=""),""==i.survey.start_date&&""==i.survey.end_date)t="",r="";else{if(""==i.survey.start_date&&""!=i.survey.end_date)return i.dateError=!0,void o(function(){i.dateError=!1},5e3);if(""!=i.survey.start_date&&""==i.survey.end_date)return i.dateError=!0,void o(function(){i.dateError=!1},5e3);if(""!=i.survey.start_date&&""!=i.survey.end_date){t=t.toString(),r=r.toString();var a=e.indexOf(t.substring(4,7))+1;a<10&&(a="0"+a),t=t.substring(11,15)+"-"+t.substring(8,10)+"-"+a,(a=e.indexOf(r.substring(4,7))+1)<10&&(a="0"+a),r=r.substring(11,15)+"-"+r.substring(8,10)+"-"+a}}l(i.survey.company_name,t,r,i.survey.project_name,i.survey.unanswered)};var c=function(e){var t={};return t.type="Gauge",t.options={width:500,height:140,redFrom:0,redTo:6,greenFrom:8,greenTo:10,minorTicks:2,min:0,max:10},null==e||void 0==e?null:(t.data=[["Label","Value"],["",parseInt(e)]],t)},d=function(e){var t=e;isNaN(t)?dbPercentText="0.00 %":(dbPercentText=t.toFixed(2)+" %",t<0&&(t*=-1)),t=t.toFixed(2),Chart.defaults.global.showTooltips=!1,Chart.types.Doughnut.extend({name:"DoughnutTextInside",showTooltip:function(){this.chart.ctx.save(),Chart.types.Doughnut.prototype.showTooltip.apply(this,arguments),this.chart.ctx.restore()},draw:function(){Chart.types.Doughnut.prototype.draw.apply(this,arguments);var e=this.chart.width,t=this.chart.height,r=(t/80).toFixed(2);this.chart.ctx.font=r+"em Lato",this.chart.ctx.textBaseline="middle";var a=dbPercentText,o=Math.round((e-this.chart.ctx.measureText(a).width)/2),n=t/2;this.chart.ctx.fillText(a,o,n)}});var r=[{label:"NPS ",value:3.6*t,color:"#1F77B4"},{value:360-3.6*t,color:"#dddddd"},{value:0,color:"#000"}];new Chart(angular.element("#NPSChart").get(0).getContext("2d")).DoughnutTextInside(r,{responsive:!0,segmentShowStroke:!1,animationEasing:"easeInOutQuint",backgroundColor:{fill:"transparent"},percentageInnerCutout:80})},p=function(e){var t={};return t.type="AreaChart",t.data={cols:[{id:"month",label:"Month",type:"string",p:{}},{id:"cost-id",label:"NPS %",type:"number"}],rows:e},t.options={backgroundColor:{fill:"transparent"},isStacked:"true",fill:20,displayExactValues:!0,pointSize:5,vAxis:{title:"Percentage",minValue:0,maxValue:100,gridlines:{count:11}},hAxis:{title:"Date"},allowHtml:!0,chartArea:{left:40,width:235}},t.formatters={arrow:[{columnNum:1,base:19}],date:[{columnNum:5,formatType:"long"}],number:[{columnNum:4,prefix:"$"}]},t},u=function(e){var t,r,a=[],o=["","January","February","March","April","May","June","July","August","September","October","November","December"];null!=e&&(""==i.survey.start_date&&""==i.survey.end_date?(new Date).getMonth()<=5?(t=1,r=6):(t=7,r=12):""!=i.survey.start_date&&""==i.survey.end_date?(r=(t=new Date(i.survey.start_date).getMonth()+1)+5)>12&&(r=12):""==i.survey.start_date&&""!=i.survey.end_date?t=(r=new Date(i.survey.end_date).getMonth()+1)<6?1:Math.abs(r-5):""!=i.survey.start_date&&""!=i.survey.end_date&&(t=new Date(i.survey.start_date).getMonth()+1,r=new Date(i.survey.end_date).getMonth()+1));for(var n=t;n<=r;n++)a.push({c:[{v:o[n]},{v:e[n],p:{className:"google-visualization-formatters-arrow-empty"}}]});return a},m=function(e,t,r,a){var o={};return o.type="BarChart",null===t&&null===e&&null===r&&null===a?null:(o.data={cols:[{id:"t",label:"Topping",type:"string"},{id:"s",label:"Rating",type:"number"}],rows:[{c:[{v:"Quality Of Deliverables"},{v:parseFloat(e)}]},{c:[{v:"On-Time Completion"},{v:parseFloat(t)}]},{c:[{v:"Meeting Business Objectives"},{v:parseFloat(r)}]},{c:[{v:"Overall Engagement Value"},{v:parseFloat(a)}]}]},o.options={backgroundColor:{fill:"transparent"},hAxis:{viewWindowMode:"explicit",viewWindow:{max:0,min:11}},chartArea:{left:140,width:450}},o)};i.allProjectNpsResponse=[{project_name:"Atmecs Technologies",customer_name:"Citrix",partner_name:"Citrix",start_date:"3 Mar 2017",end_date:"5 Mar 2017",time_ago:"5 days 3 hr ago",recommendCCSGuageGraph:c(4),satisfactionDriverPerProject:m(4,6,3,7),citrixInNext12Month:c(8),q1:"7",q2:"Loved This app",q3:"Nice UI",q4_1:"8",q4_2:"9",q4_3:"2",q4_4:"5"}]}]),angular.module("CitrixApp").controller("partnerDashboardController",["$scope","$state","PartnerService",function(e,t,r){e.$on("newCartItem",function(t,r){e.$broadcast("newCartItemHeader",r)}),e.$on("removeItemFromCart",function(t,r){e.$broadcast("removeCartItemFromHeader",r)}),e.$on("ItemPurchased",function(t,r){e.$broadcast("toMakeCartEmptyFromHeader",r)})}]),angular.module("CitrixApp").controller("AllCategoriesController",["$scope","$state","AllCategoryService","localStorageService","$rootScope","$timeout",function(e,t,r,a,o,n){var s=this;o.showSpinner=!0,s.categories={},s.projects=[],s.userProjectCount=0,r.getAllCategory().then(function(e){s.categories=e,o.showSpinner=!1},function(e){o.showSpinner=!1});a.get("partnerUser");r.getUserActiveProjects().then(function(e){for(var t=0;t<e.categoryBOs.length;t++)null!=e.categoryBOs[t].partners_projects&&(s.userProjectCount=s.userProjectCount+1);s.projects=e},function(e){}),s.selectedProject=function(e){null!=e.partners_projects&&void 0!=e.partners_projects.length&&t.go("partner.myProjectList",{catName:e.category_name})},s.selectedCategory=function(r,o,n){var s={categoryId:r,categoryName:o,categoryDescription:n,role:"PARTNER"};a.set("categoryDetails",s),e.$parent.$broadcast("headerUpdateEvent",r),t.go("partner.offers")},s.getAllCatagoriesWithOffers=function(){t.go("partner.categoriesWithOffers")},s.showAllProjectList=function(){t.go("partner.myProjectList")}}]),angular.module("CitrixApp").controller("OfferByCategoryController",["$scope","$rootScope","$state","$stateParams","OfferByCategoryService","localStorageService","$uibModal","$document",function(e,t,r,a,o,n,s,i){var l=this;t.showSpinner=!0,l.categoryDetails=n.get("categoryDetails"),l.categoryName=l.categoryDetails.categoryName,l.categoryDescription=l.categoryDetails.categoryDescription,l.categoryId=l.categoryDetails.categoryId,l.role=l.categoryDetails.role,o.getOfferByCategory(l.categoryId).then(function(e){l.offerList=e,t.showSpinner=!1},function(e){}),l.selectedOffer=function(e){r.go("partner.offersDetails",{offerID:e.id,allOffersPage:"N"})},e.$on("cartItemAdded",function(t,r){e.$emit("newCartItem",r)}),l.open=function(e){var t=angular.element(i[0].querySelector("body"));s.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"myModalContent.html",resolve:{offer:function(){return e}},controller:["$scope","offer",function(e,t){e.offer=t}],appendTo:t})}}]),angular.module("CitrixApp").controller("OfferDetailsController",["$scope","$state","$stateParams","OfferDetailsService",function(e,t,r,a){var o=this;o.allOffersPage=r.allOffersPage,a.getOfferDetails(r.offerID).then(function(e){o.offer=e},function(e){}),e.$on("cartItemAdded",function(t,r){e.$emit("newCartItem",r)})}]),angular.module("CitrixApp").controller("CheckOutController",["$scope","$state","CheckOutService","localStorageService","$rootScope",function(e,t,r,a,o){var n=this;o.showSpinner=!0;var s=[];r.getAllCartItems().then(function(e){o.showSpinner=!1,n.cartItems=e,l()},function(e){o.showSpinner=!1});var l=function(){n.totalHour=0,n.totalPrice=0;for(var e=0;e<n.cartItems.length;e++)n.totalHour=n.cartItems[e].no_of_hours+n.totalHour,n.totalPrice=n.cartItems[e].offer_price+n.totalPrice;var t={totalHour:n.totalHour,totalPrice:n.totalPrice,offerName:s};a.set("totOfferSummayData",t)};n.checkOutCart=function(){r.getAllCartItems().then(function(e){n.cartItems=e;var r=!1;for(i=0;i<n.cartItems.length;i++)"N"==n.cartItems[i].offer_ready_to_buy&&(r=!0,n.removeFromCart(n.cartItems[i].id)),s.push(n.cartItems[i].offer_name);l(),1==r?swal("Sorry","Some offers are no more available !"):t.go("partner.orderSummary")},function(e){})},n.addMoreItem=function(){t.go("partner.categoriesWithOffers")},n.removeFromCart=function(t){r.deleteItemFromCart(t).then(function(r){for(var a=0;a<n.cartItems.length;a++)if(n.cartItems[a].id==t){e.$emit("removeItemFromCart",n.cartItems[a]),n.cartItems.splice(a,1);break}l()},function(e){})}}]),angular.module("CitrixApp").controller("OrderSummaryController",["$rootScope","$scope","$stateParams","$state","CheckOutService","localStorageService","OrderSummaryService","$document","$uibModal","$timeout","AllDistributorsService","AddDistributorService",function(e,t,r,a,o,n,s,l,c,d,p,u){var m=this;m.order={},m.distributorlist=[],m.totOfferSummayData=n.get("totOfferSummayData");var g=n.get("partnerUser"),f=n.get("fieldInfo");m.totalPrice=m.totOfferSummayData.totalPrice,m.totalHour=m.totOfferSummayData.totalHour,m.isPartnerOrgIDavailable=!1,m.role=n.get("login");var h;o.getAllCartItems().then(function(e){h=e.length},function(e){}),p.getAllDistributors().then(function(e){if("No records found."!=e.message)for(i=0;i<e.length;i++)m.distributorlist.push(e[i].dist_org_id+"-"+e[i].dist_name+"-"+e[i].dist_country);else m.distributors=[]},function(e){}),null!=f&&g.user_profile.email==f.email&&(m.order.customerName=f.info.customer_name,m.order.projectName=f.info.project_name,m.order.organizationId=f.info.organization_id,m.order.companyCity=f.info.city,m.order.companyCountry=f.info.country,m.order.companyState=f.info.state,m.order.companyPostCode=f.info.pinCode,m.order.customerMobile=f.info.contact_number,m.order.customerEmail=f.info.contact_email,m.order.poNumber=f.info.poNumber,m.order.addressLine1=f.info.addressline1,m.order.addressLine2=f.info.addressline2),t.validationmsg=!1,t.checkvalidation=function(){var e=t.checkStatus;t.validationmsg=0==e||void 0==e},m.buyItems=function(){if(h>0){e.showSpinner=!0,g.order_address={city:m.order.companyCity,country:m.order.companyCountry,state:m.order.companyState,pinCode:m.order.companyPostCode,address_line_1:m.order.addressLine1,address_line_2:m.order.addressLine2,po_number:m.order.poNumber,distributor_name:g.user_profile.name},""!==m.order.partnerOrgId&&void 0!==m.order.partnerOrgId&&(g.partner_org_id=m.order.partnerOrgId,g.partner_email=m.order.PartnerEmail),g.project_name=m.order.projectName,g.customer_name=m.order.customerName,g.contact_number=m.order.customerMobile,g.contact_email=m.order.customerEmail,g.customer_org_id=m.order.organizationId,g.po_number=m.order.poNumber,g.user_profile.role=m.role,g.offer_names=m.totOfferSummayData.offerName;var r=angular.copy(g);s.buyItems(g).then(function(o){m.orderSummaryResponse=o,t.$emit("ItemPurchased"),s.getCurrentProject().then(function(e){n.set("orderInfoDetails",r),a.go("partner.orderInfo")},function(t){swal("Error !","Unable to buy item, Try Again Later!","error"),e.showSpinner=!1})},function(t){e.showSpinner=!1})}else swal("Cart Is Empty !","Add Item To Cart","error")},m.recheckOrder=function(){a.go("partner.checkout")},t.$on("$stateChangeStart",function(e,t,r){var a={email:g.user_profile.email,info:{city:m.order.companyCity,country:m.order.companyCountry,state:m.order.companyState,pinCode:m.order.companyPostCode,project_name:m.order.projectName,customer_name:m.order.customerName,organization_id:m.order.organizationId,contact_number:m.order.customerMobile,contact_email:m.order.customerEmail,poNumber:m.order.poNumber,distributorCheckbox:m.order.distributorCheckbox,addressline1:m.order.addressLine1,addressline2:m.order.addressLine2}};n.set("fieldInfo",a)}),m.open=function(e,t){var r=t?angular.element(l[0].querySelector(".modal-demo "+t)):void 0;c.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"myModalContent.html",appendTo:r})},m.findDistEmail=function(){void 0!=m.order.partnerOrgId&&""!=m.order.partnerOrgId?(m.isPartnerOrgIDavailable=!0,s.findDistEmail(m.order.partnerOrgId).then(function(e){m.order.PartnerEmail=e.email},function(e){m.order.PartnerEmail=""})):(m.isPartnerOrgIDavailable=!1,m.order.PartnerEmail="")},m.countryList=u.getCountriesList()}]),angular.module("CitrixApp").controller("MyOfferController",["$state","MyOfferService",function(e,t){this.projects=[{title:"project1"},{title:"project2"}],this.selectedProject=function(t){e.go("partner.myOffers.project",{project:t})}}]),angular.module("CitrixApp").controller("MyProjectController",["$scope","$state","$rootScope","$stateParams","MyProjectService","getProjectData","$document","$uibModal","$timeout","$window","$state","$anchorScroll","localStorageService","APP_URL",function(e,t,r,a,o,n,s,i,l,c,t,d,p,u){d.yOffset=0,d();var m=this;m.editImgUrl=u.value+"/assets/images/edit.png",m.deleteImgUrl=u.value+"/assets/images/delete.png",m.projects={},m.res=[],m.resourceList=[],m.scheduleList=[],m.customerProjectContactList=[],m.isScheduleTab=!0,m.isEditing=!1,m.statusUpdating=!1,m.startEditEndDate=!1,m.updated=!0;var g=[];m.editing=!1,m.eventSources=[],m.statusList=["Open","In Progress","Complete"],m.removeTextmsg=!1,m.userNotRemoved=!1,m.isStatusComplete=!0,m.role=p.get("login"),m.user=p.get("partnerUser"),m.freezStatus=!1,m.scheduledRes=!1,m.editingPartnerOrgId=!1;var f=null,h=!0,b={};m.projects=n;m.projects.isDisti_PurchasedFor_Partner;m.distiPurchasedPartnerthenOurself=!m.projects.isDisti_PurchasedFor_Partner,e.today=function(){e.startDate=new Date},e.today(),e.inlineOptions={customClass:function(t){var r=t.date;if("day"===t.mode)for(var a=new Date(r).setHours(0,0,0,0),o=0;o<e.events.length;o++)if(a===new Date(e.events[o].date).setHours(0,0,0,0))return e.events[o].status;return""},minDate:new Date,showWeeks:!0},e.dateOptions={formatYear:"yy",maxDate:new Date(2020,12,31),minDate:new Date(parseInt(m.projects.start_date)),startingDay:1},e.setDate=function(e,t,r){m.projects.end_date=new Date(e,t,r)},e.formats=["dd MMM yyyy"],e.format=e.formats[0],e.popup1={opened:!1},e.open1=function(){e.popup1.opened=!0},m.clearAll=function(){m.customerContact.first_name="",m.customerContact.last_name="",m.customerContact.email="",m.customerContact.phone_number=""},m.removedraggble=function(){angular.forEach(m.resourceList,function(e){var t="#"+e.id;angular.element(t).draggable("disable")})},m.enabledraggble=function(){angular.forEach(m.resourceList,function(e){var t="#"+e.id;angular.element(t).draggable("enable")})},angular.element("body").click(function(){U()});var y=n.partner_resource_list;if(null!=y)for(var _=0;_<y.length;_++){var v=y[_].partner_resource_usage,x=y[_].first_name,C=y[_].last_name,w=y[_];if(w.original_id=y[_].id,w.partner_resource_usage=null,m.resourceList.push(w),null!=v){for(var D=0;D<v.length;D++)if("Y"==v[D].schedule_status){var S={};S.start=new Date(v[D].start_date),S.end=new Date(v[D].end_date),S.stick=!0,S.allDay=!0,S.original_id=w.original_id,S.id=v[D].id,S._id=v[D].id,S.title=x+" "+C,S.total_no_of_hours=v[D].total_no_of_hours,S.email=v[D].email,S.resource_usage_id=v[D].resource_usage_id,m.scheduleList.push(S)}g=angular.copy(m.scheduleList)}}"partner"!=m.role||m.projects.isDisti_PurchasedFor_Partner||(m.projects.isDisti_PurchasedFor_Partner=!m.projects.isDisti_PurchasedFor_Partner,m.distiPurchasedPartnerthenOurself=!m.distiPurchasedPartnerthenOurself),"disti"==m.role&&m.projects.isDisti_PurchasedFor_Partner&&l(function(){m.removedraggble(),m.isStatusComplete=!1,m.freezStatus=!0,m.distiPurchasedPartnerthenOurself=!0,r.showSpinner=!1,0!=m.scheduleList.length&&(m.scheduledRes=!0)},1e3);var j=new Date(parseInt(m.projects.end_date));m.projects.end_date_utc=new Date(j.getUTCFullYear(),j.getUTCMonth(),j.getUTCDate(),j.getUTCHours(),j.getUTCMinutes(),j.getUTCSeconds());j=new Date(parseInt(m.projects.start_date));m.projects.start_date_utc=new Date(j.getUTCFullYear(),j.getUTCMonth(),j.getUTCDate(),j.getUTCHours(),j.getUTCMinutes(),j.getUTCSeconds()),m.openShareFileLink=function(){c.open(m.projects.share_file_link)},m.eventSources.push({events:m.scheduleList}),m.startEditProjectName=function(){m.editingProjectName=!m.editingProjectName,angular.element("#projectName").addClass("project-name-edit")},m.startEditResource=function(e){m.isEditing=!0,m.resource=angular.copy(e),b=angular.copy(e),m.old_email=angular.copy(e.email)},m.startEditPartnerOrgId=function(){m.editingPartnerOrgId=!m.editingPartnerOrgId,f=m.projects.sold_to_bill_to_org_ID,angular.element("#partnerOrgId").addClass("project-name-edit")},m.editPartnerOrgId=function(e){angular.element("#partnerOrgId").removeClass("project-name-edit");var t={old_cust_org_id:f,customer_org_id:angular.element("#partnerOrgId").text(),user_profile:m.user.user_profile,id:m.projects.id};o.editPartnersOrgId(t).then(function(e){m.user.user_profile.cust_org_ID==angular.element("#partnerOrgId").text()?O(!0):(m.removedraggble(),m.isStatusComplete=!1,m.freezStatus=!0,m.projects.isDisti_PurchasedFor_Partner=!0)},function(e){})},m.updateProjectStatus=function(){m.statusUpdating=!m.statusUpdating,project={project_name:m.projects.project_name,project_status:m.projects.project_status,id:m.projects.id,end_date:m.projects.end_date,project_completion_status:!1},"Complete"==m.projects.project_status?(m.removedraggble(),m.isStatusComplete=!1,project.project_completion_status=!0):(m.isStatusComplete=!0,m.enabledraggble()),o.editProjectName(project).then(function(e){},function(e){})},m.setEndDate=function(){var e=m.projects.end_date_utc;"Invalid Date"!=e?(e=e.getDate()+" "+["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()]+" "+e.getFullYear(),project={project_name:m.projects.project_name,project_status:m.projects.project_status,end_date:e,id:m.projects.id},o.editProjectName(project).then(function(e){swal({title:"",text:"Please update your existing scheduled resources",showConfirmButton:!1,timer:5e3}),l(function(){t.reload()},5e3),m.startEditEndDate=!m.startEditEndDate},function(e){})):m.startEditEndDate=!m.startEditEndDate},m.createResource=function(){if(m.resource.partners_project={id:t.params.project},m.resource.partners_profile={email:m.projects.email},""==m.resource.first_name||void 0==m.resource.first_name||""==m.resource.last_name||void 0==m.resource.last_name||""==m.resource.email||void 0==m.resource.email)return!1;m.isEditing?(m.resource.previous_email=m.old_email,m.resource.person_id=m.user.user_profile.person_id,o.editResource(m.resource).then(function(e){m.isEditing=!1;for(var t=0;t<m.scheduleList.length;t++)m.scheduleList[t].original_id==m.resource.original_id&&(m.scheduleList[t].title=m.resource.first_name+" "+m.resource.last_name,angular.element("#calendar").fullCalendar("removeEvents",m.scheduleList[t].id),m.scheduleList[t].stick=!0,m.scheduleList[t].allDay=!0,angular.element("#calendar").fullCalendar("renderEvent",m.scheduleList[t],!0));for(t=0;t<m.resourceList.length;t++)m.resourceList[t].original_id==m.resource.original_id&&(m.resourceList[t].first_name=m.resource.first_name,m.resourceList[t].last_name=m.resource.last_name,m.resourceList[t].email=m.resource.email);m.resource=angular.copy()},function(e){"409"==e.statusCode&&swal("Resourse Updation Fail","Email Already Exist"),m.resource=angular.copy(b)})):o.createResource(m.resource).then(function(e){m.resourceList=m.resourceList||[],e.original_id=e.id,m.resourceList.push(e),m.resource=angular.copy()},function(e){"409"==e.statusCode&&swal("Resourse Creation Fail","Email Already Exist")})},m.removeResource=function(e,r){var a=0,n=[];if(e.partners_project={id:t.params.project},e.partners_profile={email:m.projects.email},delete e.source,r){a=parseInt(e.total_no_of_hours);for(var s=0;s<g.length;s++)if(parseInt(g[s].id)==parseInt(e.id)){angular.element("#calendar").fullCalendar("removeEvents",e.id),g.splice(s,1);break}for(s=0;s<m.scheduleList.length;s++)if(parseInt(m.scheduleList[s].id)==parseInt(e.id)){m.scheduleList.splice(s,1);break}o.removeOneResource(e).then(function(e){},function(e){})}else{for(s=0;s<g.length;s++)parseInt(g[s].original_id)==parseInt(e.original_id)?(a+=parseInt(g[s].total_no_of_hours),angular.element("#calendar").fullCalendar("removeEvents",g[s].id)):n.push(g[s]);var i=[];for(s=0;s<m.scheduleList.length;s++)parseInt(m.scheduleList[s].original_id)==parseInt(e.original_id)&&i.push(s);for(s=i.sort().length-1;s>=0;s--)m.scheduleList.splice(i[s],1);g=angular.copy(n),o.removeResource(e).then(function(e){},function(e){swal("","This is used to remove scheduled resource only not the resource it self")}),m.isEditing&&(m.isEditing=!m.isEditing,m.resource=angular.copy())}0==g.length&&(m.scheduledRes=!1),m.projects.remaining_no_of_hours=parseInt(m.projects.remaining_no_of_hours)+a},m.editProjectName=function(){var e={};angular.element("#projectName").removeClass("project-name-edit"),e.project_name=angular.element("#projectName").text(),e.project_status=m.projects.project_status,e.end_date=m.projects.end_date,m.projects.project_name!=e.project_name&&(e.id=t.params.project,o.editProjectName(e).then(function(t){m.projects.project_name=e.project_name},function(e){}))};var P=function(e,r){var a;e.total_no_of_hours;for(_=0;_<m.resourceList.length;_++)if(m.resourceList[_].original_id==e.original_id){a=m.resourceList[_];break}null!=a?(void 0==r?null!=e.end?a.total_no_of_hours=8*e.end.diff(e.start,"days"):a.total_no_of_hours="8":a.total_no_of_hours=r,a.partners_project={id:t.params.project},a.partners_profile={email:m.projects.email},a.start_date=new Date(e.start._d).toUTCString(),a.start_date=a.start_date.substring(5,16),null!=e.end?(a.end_date=new Date(e.end._d).toUTCString(),a.end_date=a.end_date.substring(5,16)):a.end_date=a.start_date,e.total_no_of_hours=a.total_no_of_hours,a.id=e.id,A(e,a)):console.log("Resource not found")},A=function(e,t){var r=parseInt(e.total_no_of_hours),a=0,o=parseInt(m.projects.total_no_of_hours);if(angular.forEach(g,function(e){a=parseInt(a)+parseInt(e.total_no_of_hours)}),e.recieve)a=parseInt(a)+r,m.projects.remaining_no_of_hours=o-parseInt(a),e.stick=!0,g.push(e),m.scheduleList.push(e),T(t,e);else{for(var n=0;n<g.length;n++)g[n].id==e.id&&(a=parseInt(a)-parseInt(g[n].total_no_of_hours),g[n],g.splice(n,1));parseInt(a)+parseInt(r)>o?(U(),swal({title:"Schedule Resource",text:"You cannot schedule resource more than "+(o-a)+" hours",type:"input",showCancelButton:!1,closeOnConfirm:!1,allowEscapeKey:!1,animation:"slide-from-top",inputPlaceholder:"Please enter number of hours"},function(r){return!1!==r&&("NaN"==parseInt(r).toString()?(swal.showInputError("You can enter number only"),!1):""==r?(swal.showInputError("You need to enter something"),!1):parseInt(r)>parseInt(o)-parseInt(a)?(swal.showInputError("You are exceeding max time"),!1):parseInt(r)<0?(swal.showInputError("Should be greater than 0"),!1):(t.total_no_of_hours=parseInt(r),e.total_no_of_hours=parseInt(r),swal({title:"Scheduled",text:"Resource scheduled for "+parseInt(r)+" hours",timer:2e3,showConfirmButton:!0}),m.projects.remaining_no_of_hours=o-(parseInt(a)+parseInt(r)),g.push(e),e.stick=!0,e.allDay=!0,angular.element("#calendar").fullCalendar("renderEvent",e,!0),void T(t,e)))})):(m.projects.remaining_no_of_hours=o-(parseInt(a)+parseInt(r)),g.push(e),e.stick=!0,e.allDay=!0,angular.element("#calendar").fullCalendar("renderEvent",e,!0),T(t,e));for(n=0;n<m.scheduleList.length;n++)m.scheduleList[n].id==e.id&&(m.scheduleList[n].stick=!0,m.scheduleList[n].allDay=!0,m.scheduleList[n].start=e.start,m.scheduleList[n].end=e.end,m.scheduleList[n].total_no_of_hours=e.total_no_of_hours)}},T=function(e,t){o.scheduleResource(e).then(function(e){t.id=e.id,t.resource_usage_id=e.resource_usage_id},function(e){})},U=function(){$(".popover").each(function(){for(;this.firstChild;)this.removeChild(this.firstChild);this.remove()})};m.uiConfig={calendar:{header:{left:"prev,next today",center:"title",right:"month,basicWeek,basicDay,listWeek"},businessHours:!0,timezone:"UTC",editable:!0,eventRender:function(e,t){if(void 0!=e.total_no_of_hours){var r="",a=new Date(e.start).toDateString();if(r=e.title+" will work on "+a+" for "+e.total_no_of_hours+" hours",null!=e.end){new Date(e.end);var o=new Date(e.end);o.setDate(o.getDate()-1),o=o.toDateString(),r=e.title+" will work from "+a+" to "+o+" for "+e.total_no_of_hours+" hours"}t.popover({content:r,placement:"auto bottom",trigger:"hover",container:"body"})}else angular.element("#calendar").fullCalendar("removeEvents",e.id)},droppable:!0,eventDrop:function(e,t,r){if(angular.element("#calendar").fullCalendar("removeEvents",e.id),"Complete"==m.projects.project_status)return swal({title:"",text:"You can not schedule resources for completed project",showConfirmButton:!0}),void r();if("disti"==m.role&&m.projects.isDisti_PurchasedFor_Partner)return swal({title:"",text:"You are not authorized to schedule resources",showConfirmButton:!0}),void r();var a=moment(parseInt(m.projects.end_date)).utc().startOf("day");isNaN(a)&&(a=m.projects.end_date);var o=e.start;return o=moment(o).utc().startOf("day"),null==e.end&&o.isAfter(a)?(r(),void swal({title:"",text:"A resource cannot be scheduled after the end date of the project.",showConfirmButton:!0})):e.start.startOf("day").isBefore(moment(parseInt(m.projects.start_date)).utc().startOf("day"))?(r(),void swal({title:"",text:"A resource cannot be scheduled before the start date of the project.",showConfirmButton:!0})):null!=e.end&&e.end.startOf("day").isAfter(moment(parseInt(m.projects.end_date)).utc().add(1,"days").startOf("day"))?(r(),void swal({title:"",text:"A resource cannot be scheduled after the end date of the project.",showConfirmButton:!0})):(e.recieve=!1,void P(e))},eventReceive:function(e){m.scheduledRes=!0;return e.start.startOf("day").isAfter(moment(parseInt(m.projects.end_date)).utc().startOf("day"))?(angular.element("#calendar").fullCalendar("removeEvents",e.id),void swal({title:"",text:"A resource cannot be scheduled after the end date of the project.",showConfirmButton:!0})):e.start.startOf("day").isBefore(moment(parseInt(m.projects.start_date)).utc().startOf("day"))?(angular.element("#calendar").fullCalendar("removeEvents",e.id),void swal({title:"",text:"A resource cannot be scheduled before the start date of the project.",showConfirmButton:!0})):void(0==parseInt(m.projects.remaining_no_of_hours)?(swal({title:"",text:"You can not schedule resources as remaining time is zero",showConfirmButton:!0}),angular.element("#calendar").fullCalendar("removeEvents",e.id)):parseInt(m.projects.remaining_no_of_hours)>0&&parseInt(m.projects.remaining_no_of_hours)<8?(e.recieve=!0,e.original_id=e.id,e.id=(new Date).getTime().toString(),e._id=e.id,P(e,m.projects.remaining_no_of_hours)):(e.recieve=!0,e.original_id=e.id,e.id=(new Date).getTime().toString(),e._id=e.id,P(e)))},eventResize:function(e,t,r,a,o,n){return angular.element("#calendar").fullCalendar("removeEvents",e.id),"Complete"==m.projects.project_status?(swal({title:"",text:"You can not schedule resources for completed project",showConfirmButton:!0}),void r()):"disti"==m.role&&m.projects.isDisti_PurchasedFor_Partner?(swal({title:"",text:"You are not authorized to schedule resources",showConfirmButton:!0}),void r()):null!=e.end&&e.end.startOf("day").isAfter(moment(parseInt(m.projects.end_date)).add(1,"days").utc().startOf("day"))?(r(),void swal({title:"",text:"A resource cannot be scheduled after the end date of the project.",showConfirmButton:!0})):e.start.startOf("day").isBefore(moment(parseInt(m.projects.start_date)).utc().startOf("day"))?(r(),void swal({title:"",text:"A resource cannot be scheduled before the start date of the project.",showConfirmButton:!0})):(e.recieve=!1,P(e),void U())},eventClick:function(e){if("Complete"==m.projects.project_status)return!1;if("disti"==m.role&&m.projects.isDisti_PurchasedFor_Partner)return!1;m.editEventPopup=e;i.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"scheduleResource.html",controller:["$scope","$uibModalInstance",function(t,r){var a=new Date(m.editEventPopup.start);if(t.start_date_time=a.toUTCString(),null!=m.editEventPopup.end){var o=new Date(m.editEventPopup.end);o.setDate(o.getDate()-1),t.end_date_time=o.toUTCString()}else t.end_date_time=t.start_date_time;t.no_of_hours=parseInt(m.editEventPopup.total_no_of_hours),t.scheduleByTime=function(){e.recieve=!1,angular.element("#calendar").fullCalendar("removeEvents",e.id),P(e,t.no_of_hours),r.close("yes")},t.removeThisResource=function(){for(var e=null,t=0;t<g.length;t++)if(parseInt(g[t].id)==parseInt(m.editEventPopup.id)){e=angular.copy(g[t]);break}null!=e&&m.removeResource(e,!0),r.close("yes")}}],appendTo:angular.element("body")})}}},m.open=function(e,t){var r=t?angular.element(s[0].querySelector(".modal-demo "+t)):void 0;i.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"myModalContent.html",resolve:{projects:function(){return m.projects}},controller:["$scope","projects",function(e,t){e.projects=t}],appendTo:r})},m.removecustomerProjectContact=function(e){o.removecustomerProjectContact(e).then(function(t){for(var r=0;r<m.customerProjectContactList.length;r++)m.customerProjectContactList[r].id==e&&m.customerProjectContactList.splice(r,1)},function(e){m.userNotRemoved=!0,l(function(){m.userNotRemoved=!1},1e4)})},m.OnClickgetProjectContactDetails=function(){o.getProjectContactDetails(m.projects.id).then(function(e){m.customerProjectContactList=e},function(e){})},m.createCustomerProjectContacts=function(){if(m.isEditingContact){for(m.flag="true",k=0;k<m.customerProjectContactList.length;k++)if(m.customerContact.email==m.customerProjectContactList[k].email&&m.customerContact.id!=m.customerProjectContactList[k].id){m.flag="false";break}if("true"==m.flag){for(var e=0;e<m.customerProjectContactList.length;e++)m.customerProjectContactList[e].email==m.previous_email.email&&(m.customerProjectContactList[e]=m.customerContact);o.editCustomerProjectContacts(m.customerContact).then(function(e){m.customerContact=angular.copy(),m.isEditingContact=!1})}else m.customerContact=m.previous_email,m.removeTextmsg=!0,l(function(){m.removeTextmsg=!1},5e3)}else{for(m.flag="true",k=0;k<m.customerProjectContactList.length;k++)m.customerContact.email==m.customerProjectContactList[k].email&&(m.flag="false");"true"==m.flag?(m.customerContact.project_id=m.projects.id,o.createCustomerProjectContacts(m.customerContact).then(function(e){m.customerContact.id=e.id,m.customerProjectContactList.push(m.customerContact),m.customerContact=angular.copy()})):(m.removeTextmsg=!0,l(function(){m.removeTextmsg=!1},5e3))}},m.cancelUpdateforCPC=function(){m.isEditingContact=!1,m.customerProjectContact=angular.copy()},m.cancelUpdate=function(){m.isEditing=!1,m.resource=angular.copy()},m.startEditingCustomerContact=function(e){m.customerContact=angular.copy(e),m.previous_email=angular.copy(e),m.isEditingContact=!0};var O=function(e){l(function(){if(h&&m.user.user_profile.cust_org_ID==m.projects.customer_org_id)return m.enabledraggble(),m.isStatusComplete=!0,m.freezStatus=!1,m.projects.isDisti_PurchasedFor_Partner=!1,h=!1,g.length>0&&(m.scheduledRes=!0),void("disti"==m.role&&""==m.projects.disti_id&&(m.distiPurchasedPartnerthenOurself=!1));e&&(m.enabledraggble(),m.isStatusComplete=!0,m.freezStatus=!1,m.projects.isDisti_PurchasedFor_Partner=!1,h=!1)},1e3)};O(!1),"Complete"==m.projects.project_status?l(function(){m.removedraggble(),m.isStatusComplete=!1,r.showSpinner=!1},1e3):r.showSpinner=!1}]),angular.module("CitrixApp").controller("OrderInfoController",["$state","$stateParams","OrderInfoService","localStorageService","MyProjectListService","CheckOutService","OrderSummaryService","$timeout","$rootScope",function(e,t,r,a,o,n,s,i,l){var c=this,d=a.get("login");c.distiStatus=!1,c.order={};var p=a.get("orderInfoDetails"),u=a.get("totOfferSummayData"),m=a.get("partnerUser");c.order.customerName=p.customer_name,c.order.organizationId=p.customer_org_id,c.order.projectName=p.project_name,c.order.companyCity=p.order_address.city,c.order.companyState=p.order_address.state,c.order.companyCountry=p.order_address.country,c.order.companyPostCode=p.order_address.pinCode,c.order.contact_number=p.contact_number,c.order.contact_email=p.contact_email,c.order.poNumber=p.order_address.po_number,c.order.distributorName=p.distributor_name,c.order.partnerOrgId=p.partner_org_id,c.order.partnerEmail=p.partner_email,"disti"==d&&null!=c.order.partnerOrgId&&(c.distiStatus=!0),c.order.addressLine1=p.order_address.address_line_1,c.order.addressLine2=p.order_address.address_line_2,c.totalPrice=u.totalPrice,c.totalHour=u.totalHour,l.showSpinner=!1,s.getCurrentProject(m.user_profile.email).then(function(e){c.currProject=e[0].partners_projects},function(e){})}]),angular.module("CitrixApp").controller("partnerProjectListController",["$stateParams","$scope","$rootScope","$state","MyProjectListService","localStorageService","AllCategoryService","deviceDetector","$timeout","$filter","PartnerStatusService",function(e,t,r,a,o,n,s,i,l,c,d){function p(){m.statusFlag=[],"Complete"===m.searchBy.complete&&m.statusFlag.push(m.searchBy.complete),"In Progress"===m.searchBy.InProgress&&m.statusFlag.push(m.searchBy.InProgress),"Open"===m.searchBy.open&&m.statusFlag.push(m.searchBy.open),m.projects=c("partnersFilter")(m.initialObject,m.searchBy.project_name,m.searchBy.start_date,m.searchBy.end_date,m.searchBy.purchase_date,m.statusFlag,m.searchBy.category_name),m.exportProjects=[],u(m.projects),0===m.exportProjects.length&&(m.errMessage="Sorry, we cannot locate any projects based upon your filter criteria. Please update the search criteria and try again.")}function u(e){m.categoryList=["All"];for(var t=0;t<e.length;t++)for(var r=e[t].categoryBOs,a=0;a<r.length;a++){m.categoryList.push(r[a].category_name);var o=r[a].partners_projects;if(null!=o&&0!=o.length)for(var n=0;n<o.length;n++)if(null!=o[n]){o[n].category_name=r[a].category_name,o[n].price="$"+o[n].total_price.toFixed(2);var s=new Date(parseInt(o[n].purchase_date));o[n].po_date_utc=new Date(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate(),s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds());var i=new Date(parseInt(o[n].start_date));o[n].start_date_utc=new Date(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds());var l=new Date(parseInt(o[n].end_date));o[n].end_date_utc=new Date(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate(),l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds()),m.exportProjects.push(o[n])}}}var m=this;r.showSpinner=!0,t.today=function(){t.startDate=new Date,t.endDate=new Date,t.purchaseDate=new Date},t.today(),t.inlineOptions={customClass:function(e){var r=e.date;if("day"===e.mode)for(var a=new Date(r).setHours(0,0,0,0),o=0;o<t.events.length;o++)if(a===new Date(t.events[o].date).setHours(0,0,0,0))return t.events[o].status;return""},minDate:new Date,showWeeks:!0},t.dateOptions={formatYear:"yy",maxDate:new Date(2020,12,31),minDate:new Date(2e3,1,1),startingDay:1},t.dateOptionsEnd={formatYear:"yy",maxDate:new Date(2020,12,31),minDate:new Date(2e3,1,1),startingDay:1},t.formats=["MMM dd yyyy"],t.format=t.formats[0],t.popup1={opened:!1},t.popup2={opened:!1},t.popup3={opened:!1},t.open1=function(){t.popup1.opened=!0},t.open2=function(){t.popup2.opened=!0},t.open3=function(){t.popup3.opened=!0},t.$watch("PPLController.searchBy.start_date",function(e){t.dateOptionsEnd.minDate=new Date(e),t.dateOptionsEnd.maxDate=new Date(new Date(e).setMonth(new Date(e).getMonth()+96))}),t.$watch("PPLController.searchBy.end_date",function(e){t.dateOptions.maxDate=new Date(e),t.dateOptions.minDate=new Date(new Date(e).setMonth(new Date(e).getMonth()-96))}),m.initialObject=[],m.projects=[],m.exportProjects=[],m.searchBy={},m.fullName="",m.exportProjectList=u,m.searchBy.category_name=e.catName||"All";n.get("partnerUser");m.filter=p,m.clearAllFilters=function(){m.searchBy.project_name="",m.searchBy.start_date="",m.searchBy.end_date="",m.searchBy.purchase_date="",m.searchBy.complete="",m.searchBy.InProgress="",m.searchBy.open="",m.searchBy.category_name="",p()},s.getUserActiveProjects().then(function(t){m.initialObject.push(t),m.fullName=t.first_name+" "+t.last_name,g.sheetid=m.fullName,u(m.initialObject),0===m.exportProjects.length&&(m.errMessage="Currently there are no projects to display"),e.catName&&p(),r.showSpinner=!1},function(e){r.showSpinner=!1}),m.selectedProject=function(e){a.go("partner.selectedProject",{project:e})};var g={headers:!0};m.exportToExcel=function(){"safari"==i.browser?swal({title:"Warning !",text:"Excel Export feature work in all browser except Safari !",timer:4e3,showConfirmButton:!1}):0!=m.exportProjects.length&&(angular.forEach(m.exportProjects,function(e,t){e.start_date_utc=moment(e.start_date_utc).format("MMM DD YYYY"),e.end_date_utc=moment(e.end_date_utc).format("MMM DD YYYY"),e.po_date_utc=moment(e.po_date_utc).format("MMM DD YYYY")}),alasql('SELECT po_number AS Po_Number, sold_to_bill_to_org_ID AS Sold_To_Bill_To_Org_ID, customer_org_id AS Ship_To_Party_End_User_Org_ID, bill_to_customer_name_and_org_ID AS Bill_To_Customer_Name_and_Org_ID, bill_to_country AS Bill_To_Country, customer_name AS End_User_Name, end_user_company_address AS End_User_Company_Address, customer_city AS End_User_Company_City, customer_state AS End_User_Company_State, customer_country AS End_User_Company_Country, customer_pincode AS End_User_Company_Postal_Code, po_date_utc AS PO_Date, currency AS Currency, sku_description AS Form_Header, sku AS SKU, quantity AS Quantity, price AS Price, start_date_utc AS Start_Date, end_date_utc AS End_Date INTO XLSX("My Projects Details "+GETDATE()+".xlsx", ?) FROM ?',[g,m.exportProjects]))},m.exportToPDF=function(){var e=new Date;e=e.toUTCString().replace(/\s*(GMT|UTC)$/,"");var t=[];m.exportProjects.forEach(function(e,r){t.push([r+1,e.po_number,e.sold_to_bill_to_org_ID,e.customer_org_id,e.bill_to_customer_name_and_org_ID,e.bill_to_country,e.customer_name,e.end_user_company_address,e.customer_city,e.customer_state,e.customer_country,e.customer_pincode,moment(e.po_date_utc).format("MMM DD YYYY"),e.currency,e.sku_description,e.sku,e.quantity,e.price,moment(e.start_date_utc).format("MMM DD YYYY"),moment(e.end_date_utc).format("MMM DD YYYY")])});var r=new jsPDF("l","pt","a4");r.text(m.fullName,40,35),r.autoTable(["No","Po Number","Sold To Bill To OrgID","Ship To Party End User OrgID","Bill To Customer Name and OrgID","Bill To Country","End User Name","End User Company Address","End User Company City","End User Company State","End User Company Country","End User Company Postal Code","PO Date "," Currency","Form Header","SKU","Quantity","Price","Start Date","End Date"],t,{startY:60,theme:"grid",styles:{overflow:"linebreak",pageBreak:"auto",columnWidth:"auto"},headerStyles:{fillColor:[0,161,224],textColor:[255,255,255],halign:"center"}}),r.setProperties({title:"Test PDF Document",subject:"Export Pdf In tabular format",author:"sasne.prasanna@atmecs.com",keywords:"generated, javascript, web 2.0, ajax",overflow:"linebreak"}),0!=m.exportProjects.length&&r.save("My Project "+e+".pdf")}}]),angular.module("CitrixApp").controller("AllCategoriesWithOffersController",["$scope","$rootScope","$state","$stateParams","AllCategoriesWithOffersService","localStorageService","$uibModal","$document",function(e,t,r,a,o,n,s,i){var l=this;t.showSpinner=!0,o.getOffersAsPerCategories().then(function(e){l.offerList=e,t.showSpinner=!1},function(e){}),l.selectedOffer=function(e){r.go("partner.offersDetails",{offerID:e.id,allOffersPage:"Y"})},e.$on("cartItemAdded",function(t,r){e.$emit("newCartItem",r)}),l.open=function(e){var t=angular.element(i[0].querySelector("body"));s.open({ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"myModalContent.html",resolve:{offer:function(){return e}},controller:["$scope","offer",function(e,t){e.offer=t}],appendTo:t})}}]),angular.module("CitrixApp").controller("CustomerSurveyController",["$scope","$state","$stateParams","CustomerSurveyService","localStorageService","$timeout","$rootScope","$filter",function(e,t,r,a,o,n,s,i){function l(e,t,r){for(var a=0,o=e.length;a<o;a++)if(e[a][t]===r)return!0;return!1}var c=this;c.allProjectNpsResponse=[],c.npsProjectNameList=[],c.survey_send=0,c.survey_taken=0,projectObject={name:"All",id:""},l(c.npsProjectNameList,"id",projectObject.id)||c.npsProjectNameList.push(projectObject);var d;c.survey={},c.survey.project_name="",c.survey.start_date="",c.survey.end_date="",c.survey.quarter_name="",c.survey.unanswered="";!function(){c.quarterList=[];var e=2017;if(e<(new Date).getFullYear())for(var t=e;t<(new Date).getFullYear();t++){for(var r=1;r<5;r++)c.quarterList.push(t+" Q"+r);t==(new Date).getFullYear()-1&&(e=(new Date).getFullYear())}e==(new Date).getFullYear()&&((new Date).getMonth()>=0&&c.quarterList.push(e+" Q1"),(new Date).getMonth()>=3&&c.quarterList.push(e+" Q2"),(new Date).getMonth()>=5&&c.quarterList.push(e+" Q3"),(new Date).getMonth()>=8&&c.quarterList.push(e+" Q4"))}(),e.today=function(){e.startDate=new Date,e.endDate=new Date},e.today(),e.inlineOptions={customClass:function(t){var r=t.date;if("day"===t.mode)for(var a=new Date(r).setHours(0,0,0,0),o=0;o<e.events.length;o++)if(a===new Date(e.events[o].date).setHours(0,0,0,0))return e.events[o].status;return""},minDate:new Date,showWeeks:!0},e.dateOptions={formatYear:"yy",maxDate:new Date(2020,12,31),minDate:new Date(2e3,1,1),startingDay:1},e.dateOptionsEnd={formatYear:"yy",maxDate:new Date(2020,12,31),minDate:new Date(2e3,1,1),startingDay:1},e.formats=["MMM dd yyyy"],e.format=e.formats[0],e.popup1={opened:!1},e.popup2={opened:!1},e.open1=function(){e.popup1.opened=!0},e.open2=function(){e.popup2.opened=!0},e.$watch("CSController.survey.start_date",function(t){e.dateOptionsEnd.minDate=new Date(t),e.dateOptionsEnd.maxDate=new Date(new Date(t).setMonth(new Date(t).getMonth()+6))}),e.$watch("CSController.survey.end_date",function(t){e.dateOptions.maxDate=new Date(t),e.dateOptions.minDate=new Date(new Date(t).setMonth(new Date(t).getMonth()-6))}),c.selectQuarter=function(){var e,t,r=c.survey.quarter_name.slice(0,4);"Q1"==c.survey.quarter_name.slice(5)?(e=new Date(r+"-01-01"),t=new Date(r+"-03-31"),c.survey.start_date=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()),c.survey.end_date=new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds())):"Q2"==c.survey.quarter_name.slice(5)?(e=new Date(r+"-04-01"),t=new Date(r+"-06-30"),c.survey.start_date=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()),c.survey.end_date=new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds())):"Q3"==c.survey.quarter_name.slice(5)?(e=new Date(r+"-07-01"),t=new Date(r+"-09-30"),c.survey.start_date=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()),c.survey.end_date=new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds())):"Q4"==c.survey.quarter_name.slice(5)&&(e=new Date(r+"-10-01"),t=new Date(r+"-12-31"),c.survey.start_date=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()),c.survey.end_date=new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds()))},c.clearAllFilters=function(){c.allProjectNpsResponse=[],c.survey.hasOwnProperty("project_name")&&(c.survey.project_name=""),c.survey.hasOwnProperty("start_date")&&(c.survey.start_date=""),c.survey.hasOwnProperty("end_date")&&(c.survey.end_date=""),c.survey.hasOwnProperty("quarter_name")&&(c.survey.quarter_name=""),c.survey.hasOwnProperty("unanswered")&&(c.survey.unanswered=""),addChartsToResponse(d)},c.getNpsResponse=function(){var e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];c.allProjectNpsResponse=[];var t="",r="";if(""!=c.survey.start_date&&void 0!=c.survey.start_date&&(t=new Date(c.survey.start_date)),""!=c.survey.end_date&&void 0!=c.survey.end_date)r=new Date(c.survey.end_date);var i=o.get("partnerUser");if(void 0!=t&&""!=t){s_date=t.toString();var l=e.indexOf(s_date.substring(4,7))+1;l<10&&(l="0"+l),t=s_date.substring(11,15)+"-"+s_date.substring(8,10)+"-"+l}else t="",c.survey.start_date="";if(void 0!=r&&""!=r?(e_date=r.toString(),(l=e.indexOf(e_date.substring(4,7))+1)<10&&(l="0"+l),r=e_date.substring(11,15)+"-"+e_date.substring(8,10)+"-"+l):(r="",c.survey.end_date=""),""==t&&""!=r||""!=t&&""==r)return c.dateError=!0,void n(function(){c.dateError=!1},5e3);s.showSpinner=!0,a.getProjectsNPSResponse(i.user_profile.email,t,r,c.survey.project_name,c.survey.unanswered).then(function(e){s.showSpinner=!1,addChartsToResponse(e),""==c.survey.start_date&&""==c.survey.end_date&&""==c.survey.project_name&&""==c.survey.project_name&&""==c.survey.unanswered&&(d=e)},function(e){})},c.getNpsResponse(),addChartsToResponse=function(e){if(p(e),null==e.avg_nps_response||"0"==e.avg_nps_response.survey_response_rate?(c.survey_per=0,angular.element(".bar").css("width",c.survey_per+"%")):angular.element(".bar").css("width",e.avg_nps_response.survey_response_rate+"%"),null!=e.partnersProjectResponseBOs){for(var t=0;t<e.partnersProjectResponseBOs.length;t++){var r=e.partnersProjectResponseBOs[t];if(null!=r){var a=r.nps_survey_results;if(null!=a)for(var o=0;o<a.length;o++){a[o].project_name=r.project_name,a[o].recommendCCSGuageGraph=u(a[o].q1),a[o].citrixInNext12Month=u(a[o].q5),a[o].satisfactionDriverPerProject=g(a[o].q4_1,a[o].q4_2,a[o].q4_3,a[o].q4_4),a[o].customer_name=r.customer_name;var n=new Date(a[o].end_date)-new Date(a[o].start_date),s=Math.floor(n/864e5),i=Math.floor(n%864e5/36e5),d=Math.round(n%864e5%36e5/6e4),m=Math.round(n%864e5%36e5%6e4/1e3),f=new Date(parseInt(a[o].creation_time));a[o].creation_time=new Date(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate(),f.getUTCHours(),f.getUTCMinutes(),f.getUTCSeconds());f=new Date(parseInt(a[o].end_date));a[o].end_date=new Date(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate(),f.getUTCHours(),f.getUTCMinutes(),f.getUTCSeconds()),a[o].time_ago=s+" days "+i+" hours "+d+" mins "+m+" secs",c.allProjectNpsResponse.push(a[o]),projectObject={name:r.project_name,id:r.id},l(c.npsProjectNameList,"id",projectObject.id)||c.npsProjectNameList.push(projectObject)}}}c.npsProjectNameList=c.npsProjectNameList.filter(function(e,t){return c.npsProjectNameList.indexOf(e)==t})}};var p=function(e){var t=[],r=["","January","February","March","April","May","June","July","August","September","October","November","December"];if(null==e.avg_nps_response){doughNut(0),""==c.survey.start_date&&""==c.survey.end_date?(new Date).getMonth()<=5?(stMonth=1,edMonth=6):(stMonth=7,edMonth=12):""!=c.survey.start_date&&""==c.survey.end_date?(stMonth=new Date(c.survey.start_date).getMonth()+1,edMonth=stMonth+5,edMonth>12&&(edMonth=12)):""==c.survey.start_date&&""!=c.survey.end_date?(edMonth=new Date(c.survey.end_date).getMonth()+1,edMonth<6?stMonth=1:stMonth=Math.abs(edMonth-5)):""!=c.survey.start_date&&""!=c.survey.end_date&&(stMonth=new Date(c.survey.start_date).getMonth()+1,edMonth=new Date(c.survey.end_date).getMonth()+1);for(var a=stMonth;a<=edMonth;a++)t.push({c:[{v:r[a]},{v:0,p:{className:"google-visualization-formatters-arrow-empty"}}]});c.npsMonthlyTrend=m(t),c.satisfactionDriver=g(0,0,0,0),c.survey_send=0,c.survey_taken=0,c.survey_per=0,angular.element(".bar").css("width",c.survey_per+"%")}else{if(doughNut(isNaN(parseFloat(e.avg_nps_response.nps_percentage))?0:parseFloat(e.avg_nps_response.nps_percentage)),null!=e.avg_nps_response.nps_monthly_trends_map){""==c.survey.start_date&&""==c.survey.end_date?(new Date).getMonth()<=5?(stMonth=1,edMonth=6):(stMonth=7,edMonth=12):""!=c.survey.start_date&&""==c.survey.end_date?(stMonth=new Date(c.survey.start_date).getMonth()+1,edMonth=stMonth+5,edMonth>12&&(edMonth=12)):""==c.survey.start_date&&""!=c.survey.end_date?(edMonth=new Date(c.survey.end_date).getMonth()+1,edMonth<6?stMonth=1:stMonth=Math.abs(edMonth-5)):""!=c.survey.start_date&&""!=c.survey.end_date&&(stMonth=new Date(c.survey.start_date).getMonth()+1,edMonth=new Date(c.survey.end_date).getMonth()+1);for(a=stMonth;a<=edMonth;a++)t.push({c:[{v:r[a]},{v:e.avg_nps_response.nps_monthly_trends_map[a],p:{className:"google-visualization-formatters-arrow-empty"}}]})}c.npsMonthlyTrend=m(t),c.satisfactionDriver=g(e.avg_nps_response.avg_quality_of_deliver,e.avg_nps_response.avg_on_time_completion,e.avg_nps_response.avg_meeting_bus_objectives,e.avg_nps_response.avg_overall_eng_value),c.survey_send=e.avg_nps_response.total_no_of_survey_sent,c.survey_taken=e.avg_nps_response.total_no_of_survey_taken,c.survey_per=e.avg_nps_response.survey_response_rate,angular.element(".bar").css("width",c.survey_per+"%")}},u=function(e){var t={};return t.type="Gauge",t.options={width:500,height:140,redFrom:0,redTo:6,greenFrom:8,greenTo:10,minorTicks:2,min:0,max:10},null==e||void 0==e?null:(t.data=[["Label","Value"],["",parseInt(e)]],t)};doughNut=function(e){var t=e;isNaN(t)?dbPercentText="0.00%":(dbPercentText=t.toFixed(2)+" %",t<0&&(t*=-1)),t=t.toFixed(2),Chart.defaults.global.showTooltips=!1,Chart.types.Doughnut.extend({name:"DoughnutTextInside",showTooltip:function(){this.chart.ctx.save(),Chart.types.Doughnut.prototype.showTooltip.apply(this,arguments),this.chart.ctx.restore()},draw:function(){Chart.types.Doughnut.prototype.draw.apply(this,arguments);var e=this.chart.width,t=this.chart.height,r=(t/80).toFixed(2);this.chart.ctx.font=r+"em Lato",this.chart.ctx.textBaseline="middle";var a=dbPercentText,o=Math.round((e-this.chart.ctx.measureText(a).width)/2),n=t/2;this.chart.ctx.fillText(a,o,n)}});var r=[{label:"NPS ",value:3.6*t,color:"#1F77B4"},{value:360-3.6*t,color:"#dddddd"},{value:0,color:"#000"}];new Chart(angular.element("#NPSChart").get(0).getContext("2d")).DoughnutTextInside(r,{responsive:!0,segmentShowStroke:!1,animationEasing:"easeInOutQuint",backgroundColor:{fill:"transparent"},percentageInnerCutout:80})};var m=function(e){var t={};return t.type="AreaChart",t.data={cols:[{id:"month",label:"Month",type:"string",p:{}},{id:"cost-id",label:"NPS %",type:"number"}],rows:e},t.options={backgroundColor:{fill:"transparent"},isStacked:"true",fill:20,displayExactValues:!0,pointSize:5,vAxis:{title:"Percentage",minValue:0,maxValue:100,gridlines:{count:11}},hAxis:{title:"Date"},allowHtml:!0,chartArea:{left:40,width:235}},t.formatters={arrow:[{columnNum:1,base:19}],date:[{columnNum:5,formatType:"long"}],number:[{columnNum:4,prefix:"$"}]},t},g=function(e,t,r,a){var o={};return o.type="BarChart",null===t&&null===e&&null===r&&null===a?null:(o.data={cols:[{id:"t",label:"Topping",type:"string"},{id:"s",label:"Rating",type:"number"}],rows:[{c:[{v:"Quality Of Deliverables"},{v:parseFloat(e)}]},{c:[{v:"On-Time Completion"},{v:parseFloat(t)}]},{c:[{v:"Meeting Business Objectives"},{v:parseFloat(r)}]},{c:[{v:"Overall Engagement Value"},{v:parseFloat(a)}]}]},o.options={backgroundColor:{fill:"transparent"},hAxis:{viewWindowMode:"explicit",viewWindow:{max:0,min:11}},chartArea:{left:140,width:450}},o)}}]),angular.module("CitrixApp").controller("MyOffersPageController",["$state",function(e){this.goToMyOffers=function(){e.go("partner.myOffers")}}]),angular.module("CitrixApp").controller("PartnerHeaderController",["$state","$scope","PartnerHeaderService","CheckOutService","localStorageService","$document","$uibModal","$window","APP_URL",function(e,t,r,a,o,n,s,i,l){var c=this;c.logoUrl=l.value+"/assets/images/citrix-partner-logo.png",c.shoppingCartUrl=l.value+"/assets/images/shopping-cart.png",c.user=o.get("partnerUser"),c.role=o.get("login"),t.$on("newCartItemHeader",function(e,t){t.offer_name=t.offerName,c.cartItems.push(t)}),t.$on("removeCartItemFromHeader",function(e,t){for(var r=0;r<c.cartItems.length;r++)if(c.cartItems[r].offerId==t.offerId||c.cartItems[r].offerId==t.offer_id){c.cartItems.splice(r,1);break}}),t.$on("toMakeCartEmptyFromHeader",function(e,t){c.getAllCartItems()}),c.heading="Welcome Partner",c.myCart=function(){e.go("partner.checkout")},c.goToMyOffers=function(){e.go("partner.myOffers")},c.goToMyCart=function(){e.go("partner.checkout")},c.getAllCartItems=function(){a.getAllCartItems().then(function(e){c.cartItems=e},function(e){})},c.getAllCartItems()}]),angular.module("CitrixApp").controller("AdminHeaderController",["$scope","AdminHeaderService","localStorageService","APP_URL",function(e,t,r,a){this.logoUrl=a.value+"/assets/images/citrix-partner-logo.png",this.user=r.get("partnerUser"),this.heading="Categories",this.sendSurveyRequest=function(){t.sendSurveyRequest().then(function(e){swal({title:"Success",text:e.message,timer:4e3,showConfirmButton:!1})},function(){swal({title:"Error",text:"Some error occur...please try again",timer:4e3,showConfirmButton:!1})})}}]),angular.module("CitrixApp").controller("ContactUsController",["$state","$scope",function(e,t){this.thankYouMessage="Thank You For Submitting Feedback"}]),angular.module("CitrixApp").controller("ManageAdminController",["$scope","ManageAdminService","$state","$timeout","localStorageService","APP_URL",function(e,t,r,a,o,n){var s=this;s.user=o.get("partnerUser"),s.deleteImgUrl=n.value+"/assets/images/delete.png",s.getAllAccess=function(){t.getAll().then(function(e){s.allAdminList=e.adminUserList})},s.getAllAccess(),s.saveadmin=function(){s.enableSpinner=!0,t.saveAdmin(s.admin).then(function(e){$("#myModal").modal("hide"),swal({title:"Saved",text:"Admin added successfully",timer:3e3,showConfirmButton:!1}),s.getAllAccess(),s.enableSpinner=!1},function(e){swal({title:"Error!",text:"Please try again"}),s.enableSpinner=!1})},s.removeAdmin=function(e){t.removeAdmin(e).then(function(t){for(var r=-1,a=s.allAdminList,o=0;o<a.length;o++)if(a[o].person_id==e){r=o;break}-1!=r&&s.allAdminList.splice(r,1),swal({title:"Deactivated!",text:"This user no longer able to loggedIn as admin",timer:4e3,showConfirmButton:!1})},function(e){})}}]),angular.module("CitrixApp").controller("ManageUserController",["$scope","ManageUserService","$state","localStorageService","APP_URL",function(e,t,r,a,o){var n=this;n.deleteImgUrl=o.value+"/assets/images/delete.png",n.currentPage=1,n.pageOffset=20,n.maxSize=5,n.getAllUser=function(){n.enableSpinner=!0,t.getAll(n.currentPage,n.pageOffset).then(function(e){n.allUserList=e.userList,n.totalCount=e.count,n.enableSpinner=!1})},n.getAllUser(),n.removeUser=function(e,r){swal({title:"Are you sure?",text:"You want to InActivate "+r+" !!",showCancelButton:!0,confirmButtonColor:"#00a1e0",confirmButtonText:"Yes",closeOnConfirm:!0,closeOnCancel:!0},function(r){r&&t.removeUser(e).then(function(t){for(var r=n.allUserList,a=0;a<r.length;a++)if(r[a].id==e){r[a].status="InActive";break}swal({title:"Deactivated!",text:"This user no longer able to login to CSDP",timer:4e3,showConfirmButton:!1})},function(e){})})}}]),angular.module("CitrixApp").directive("addToCart",[function(){return{scope:{offerId:"@offerId",offerName:"@offerName",offerDescription:"@offerDescription",price:"@offerPrice",noOfCredits:"@offerCredit"},restrict:"E",templateUrl:"app/shared/directives/addToCart/addToCart.view.html",controller:"addToCartController"}}]).controller("addToCartController",["$scope","AddToCartService","localStorageService",function(e,t,r){e.addToCart=function(a,o,n,s,i){var l={offerId:a,offerName:o,offerDescription:n,price:s,noOfCredits:i},c=r.get("partnerUser");c.partners_project={offer_id:a,email:c.user_profile.email},t.saveCart(c).then(function(t){e.$emit("cartItemAdded",l)},function(e){})}}]),angular.module("CitrixApp").directive("buyNow",["$state","localStorageService","AddToCartService","$rootScope",function(e,t,r,a){return{scope:{offerId:"@offerId",offerName:"@offerName",offerDescription:"@offerDescription",price:"@offerPrice",noOfCredits:"@offerCredit"},restrict:"E",templateUrl:"app/shared/directives/buyNow/buyNow.view.html",controller:"buyNowController"}}]).controller("buyNowController",["$scope","AddToCartService","localStorageService","$rootScope","$state",function(e,t,r,a,o){e.buyNow=function(n,s,i,l,c){a.showSpinner=!0;var d={offerId:n,offerName:s,offerDescription:i,price:l,noOfCredits:c},p=r.get("partnerUser");p.partners_project={offer_id:n,email:p.user_profile.email},t.saveCart(p).then(function(t){e.$emit("cartItemAdded",d),o.go("partner.checkout")},function(e){})}}]),angular.module("CitrixApp").directive("itemsDrag",[function(){return{link:function(e,t,r){var a=function(){t.data("event",{title:r.eventTitle,id:r.eventId,stick:!0}),t.draggable({revert:!0,revertDuration:0})};a(),r.$observe("eventTitle",function(e){a()})}}}]),angular.module("CitrixApp").directive("modalPopUp",[function(){return{scope:{offer:"=",category:"=",project:"@projectId",terms:"@termsConditions"},restrict:"E",templateUrl:"app/shared/directives/modalPopUp/modalPopUp.view.html",controller:"modalPopUpController"}}]).controller("modalPopUpController",["$scope","$uibModal",function(e,t){e.createPopup=function(e){t.open({controller:"modalController",controllerAs:"modal",templateUrl:"modal.html",resolve:{offerData:function(){return e}}})},e.createResource=function(){t.open({controller:"newResourceController",controllerAs:"NRController",templateUrl:"createNewResource.html"})},e.createPopUpCategory=function(e){t.open({controller:"categoryDetailsController",controllerAs:"CDController",templateUrl:"categoryDetails.html",resolve:{categoryData:function(){return e}}})},e.showTermsAndConditions=function(){t.open({controller:"privacyPolicyController",controllerAs:"PPController",templateUrl:"privacyPolicy.html"})}}]),angular.module("CitrixApp").controller("modalController",["$uibModalInstance","offerData",function(e,t){this.offerDescription=t,this.ok=function(){e.close("yes")}}]),angular.module("CitrixApp").controller("newResourceController",["$uibModalInstance","modalPopUpService",function(e,t){var r=this;r.createResource=function(){r.user.partners_profile={id:"1"},t.createResource(r.user).then(function(e){},function(e){}),e.dismiss("Resource created successfully")}}]),angular.module("CitrixApp").controller("categoryDetailsController",["$uibModalInstance","categoryData",function(e,t){this.categoryDescription=t,this.ok=function(){e.close("yes")}}]),angular.module("CitrixApp").controller("privacyPolicyController",["$uibModalInstance",function(e){this.ok=function(){e.close("yes")}}]),angular.module("CitrixApp").factory("modalPopUpService",["$q","$http","APP_URL",function(e,t,r){var a={};return a.createResource=function(a){var o=e.defer();return t.post(r.value+"/resources/create",a).then(function(e){o.resolve(e.data)},function(e){console.log(e),o.reject("Error")}),o.promise},a}]),angular.module("CitrixApp").directive("contactUs",[function(){return{restrict:"E",templateUrl:"app/shared/directives/contactUs/contactUs.view.html",controller:"contctUsController"}}]).controller("contctUsController",["$scope","$uibModal",function(e,t){e.contactUs=function(){t.open({controller:"contactUsController",controllerAs:"CUCtrl",templateUrl:"contactUs.html"})}}]).controller("contactUsController",["$window",function(e){this.thankYouUrl="https://"+e.location.host+"/#/partner/thankYou"}]),angular.module("CitrixApp").filter("capitalize",function(){return function(e,t){return null!=e&&(e=e.toLowerCase()),e.substring(0,1).toUpperCase()+e.substring(1)}}),angular.module("CitrixApp").filter("truncate",function(){return function(e,t){return e.length>t?e.substr(0,t)+"...":e}}),angular.module("CitrixApp").filter("filterProject",function(){return function(e,t){var r=[];return void 0!=t&&(t.hasOwnProperty("project_name")&&""==t.project_name&&delete t.project_name,(t.hasOwnProperty("category_name")&&""==t.category_name||"All"==t.category_name)&&delete t.category_name,t.hasOwnProperty("start_date")&&void 0==t.start_date&&delete t.start_date,t.hasOwnProperty("end_date")&&void 0==t.end_date&&delete t.end_date,t.hasOwnProperty("purchase_date")&&void 0==t.purchase_date&&delete t.purchase_date,t.hasOwnProperty("complete")&&void 0==t.complete&&delete t.complete,t.hasOwnProperty("InProgress")&&void 0==t.InProgress&&delete t.InProgress,t.hasOwnProperty("open")&&void 0==t.open&&delete t.open),void 0==t||angular.equals(t,{})?e:(angular.forEach(e,function(e,a){var o=new Date(e.start_date),n=new Date(e.end_date),s=new Date(e.purchase_date);t.hasOwnProperty("start_date")&&t.start_date<=o&&-1==r.indexOf(e)&&r.push(e),t.hasOwnProperty("end_date")&&t.end_date>=n&&-1==r.indexOf(e)&&r.push(e),t.hasOwnProperty("purchase_date")&&t.purchase_date.toString()===s.toString()&&-1==r.indexOf(e)&&r.push(e),t.hasOwnProperty("complete")&&e.project_status==t.complete&&-1==r.indexOf(e)&&r.push(e),t.hasOwnProperty("InProgress")&&e.project_status==t.InProgress&&-1==r.indexOf(e)&&r.push(e),t.hasOwnProperty("open")&&e.project_status==t.open&&-1==r.indexOf(e)&&r.push(e),t.hasOwnProperty("project_name")&&e.project_name.toUpperCase().includes(t.project_name.toUpperCase())&&-1==r.indexOf(e)&&r.push(e),t.hasOwnProperty("category_name")&&e.category_name.toUpperCase().includes(t.category_name.toUpperCase())&&-1==r.indexOf(e)&&r.push(e)}),r)}}),angular.module("CitrixApp").filter("removeDuplicated",function(){return function(e,t){var r=[],a=[];return angular.forEach(e,function(e){var o=e[t];-1===a.indexOf(o)&&(a.push(o),r.push(e))}),r}}),angular.module("CitrixApp").filter("partnersFilter",function(){return function(e,t,r,a,o,n,s){for(var i=[],l=0;l<e.length;l++){var c={};if(c.id=e[l].id,c.email=e[l].email,c.first_name=e[l].first_name,c.last_name=e[l].last_name,c.person_id=e[l].person_id,c.password=e[l].password,c.user_name=e[l].user_name,c.role=e[l].role,c.company_name=e[l].company_name,c.categoryBOs=[],null!==e[l].categoryBOs)for(var d=0;d<e[l].categoryBOs.length;d++){var p={};if(p.id=e[l].categoryBOs[d].id,p.category_name=e[l].categoryBOs[d].category_name,p.category_description=e[l].categoryBOs[d].category_description,p.offers=e[l].categoryBOs[d].offers,p.partners_projects=[],null!==e[l].categoryBOs[d].partners_projects)for(var u=0;u<e[l].categoryBOs[d].partners_projects.length;u++)if(null!=e[l].categoryBOs[d].partners_projects[u]){var m=!0,g=!0,f=!0,h=!0,b=!0,y=!0,_=!0,v=!0,x=new Date(r),C=new Date(a),w=new Date(o),D=e[l].categoryBOs[d].partners_projects[u].project_name.toUpperCase();if(""!==s){var S=e[l].categoryBOs[d].partners_projects[u].category_name.toUpperCase();null!==s&&""!==s&&void 0!==s&&"All"!==s&&-1===S.indexOf(s.toUpperCase())&&(v=!1)}null!==t&&""!==t&&void 0!==t&&-1===D.indexOf(t.toUpperCase())&&(m=!1),null===x||""===x||void 0===x||isNaN(x)||(datePickerStartDate=x.getFullYear()+""+("0"+(x.getMonth()+1)).slice(-2)+("0"+x.getDate()).slice(-2),startDateDb=e[l].categoryBOs[d].partners_projects[u].start_date_utc,startDateDb=startDateDb.getFullYear()+""+("0"+(startDateDb.getMonth()+1)).slice(-2)+("0"+startDateDb.getDate()).slice(-2)),null!==x&&""!==x&&void 0!==x&&!isNaN(x)&&startDateDb<datePickerStartDate&&(g=!1),null===C||""===C||void 0===C||isNaN(C)||(datePickerEndDate=C.getFullYear()+""+("0"+(C.getMonth()+1)).slice(-2)+("0"+C.getDate()).slice(-2),endDateDb=e[l].categoryBOs[d].partners_projects[u].end_date_utc,endDateDb=endDateDb.getFullYear()+""+("0"+(endDateDb.getMonth()+1)).slice(-2)+("0"+endDateDb.getDate()).slice(-2)),null!==C&&""!==C&&void 0!==C&&!isNaN(C)&&endDateDb>datePickerEndDate&&(f=!1),null===w||""===w||void 0===w||isNaN(w)||(datePickerPurchaseDate=w.getFullYear()+""+("0"+(w.getMonth()+1)).slice(-2)+("0"+w.getDate()).slice(-2),purchaseDateDb=e[l].categoryBOs[d].partners_projects[u].po_date_utc,purchaseDateDb=purchaseDateDb.getFullYear()+""+("0"+(purchaseDateDb.getMonth()+1)).slice(-2)+("0"+purchaseDateDb.getDate()).slice(-2)),null===w||""===w||void 0===w||isNaN(w)||purchaseDateDb===datePickerPurchaseDate||(h=!1),null!==n[0]&&""!==n[0]&&void 0!==n[0]&&-1===e[l].categoryBOs[d].partners_projects[u].project_status.indexOf(n[0])&&(b=!1),m&&g&&f&&h&&b&&v&&p.partners_projects.push(e[l].categoryBOs[d].partners_projects[u]),n.length>=2&&(null!==n[1]&&""!==n[1]&&void 0!==n[1]&&-1===e[l].categoryBOs[d].partners_projects[u].project_status.indexOf(n[1])&&(y=!1),m&&g&&f&&h&&y&&v&&p.partners_projects.push(e[l].categoryBOs[d].partners_projects[u]),n.length>2&&(null!==n[2]&&""!==n[2]&&void 0!==n[2]&&-1===e[l].categoryBOs[d].partners_projects[u].project_status.indexOf(n[2])&&(_=!1),m&&g&&f&&h&&_&&v&&p.partners_projects.push(e[l].categoryBOs[d].partners_projects[u])))}c.categoryBOs.push(p)}i.push(c)}return i}}),angular.module("CitrixApp").filter("countrySerach",function(){return function(e,t){var r=[];if(angular.isArray(e)){var a=Object.keys(t);e.forEach(function(e){for(var o=!1,n=0;n<a.length;n++){var s=a[n],i=t[s].toLowerCase();if(-1!==e[s].toString().toLowerCase().indexOf(i)){o=!0;break}}o&&r.push(e)})}else r=e;return r}}),angular.module("CitrixApp").filter("npsResponseFilter",function(){return function(e,t,r,a,o){function n(e){return new Date(e)}var s=[];if(o){for(var i=[],l=0;l<e.length;l++)null!=e[l].q1&&null!=e[l].q2&&null!=e[l].q3&&null!=e[l].q4_1&&null!=e[l].q4_2&&null!=e[l].q4_3&&null!=e[l].q4_4&&null!=e[l].q5&&i.push(l);for(l=i.length-1;l>=0;l--)e.splice(i[l],1)}for(l=0;l<e.length;l++){var c=!0,d=!0,p=!0,u=e[l].project_name.toUpperCase(),m=new Date(a),g=new Date(e[l].end_date),f=new Date(r),h=new Date(e[l].start_date);null!==t&&""!==t&&void 0!==t&&-1===u.indexOf(t.toUpperCase())&&(c=!1),null!==m&&""!==m&&void 0!==m&&!isNaN(m)&&n(g)>n(m)&&(p=!1),null!==f&&""!==f&&void 0!==f&&!isNaN(f)&&n(h)<n(f)&&(d=!1),c&&d&&p&&s.push(e[l])}return s}});